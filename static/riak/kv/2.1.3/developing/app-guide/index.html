<!DOCTYPE html>

<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"></html><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"></html><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"></html><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->




<head class="tutorials">
  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width">
  <meta name="project" content="riak_kv">
  <meta name="version" content="2.1.3">
  <meta name="base-url" content="">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  <title>Riak KV Application Guide</title>

  <link href="/css/all.css" media="screen" rel="stylesheet" type="text/css">
  <link href="/css/print.css" media="print" rel="stylesheet" type="text/css">

  
  <style type="text/css"> .js_enabled pre { visibility : hidden; } </style>
  <script type="text/javascript">
    document.documentElement.className = 'js_enabled';
  </script>
</head>



<body class="riak_kv 2.1.3 latest ">

  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-T9C8MK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-T9C8MK');</script>

  
<aside id="nav-container" role="complementary">
  <nav class="overview" id="primary-nav" role="nav">
    <div id="primary-nav-content">
      <h2 class="responsive-link"><a class="responsive-toggle"></a></h2>

      
      <form id="searchbox_011972015458788978446:zgdcy4fa-o0" action="">
        <div class="nav-field-container">
          <div id="icon-container-search">
            <div class="icon-container"><span aria-hidden="true" class="nav-icon-search icon-search"></span></div>
            <span class="separator">&#124;</span>
          </div>
          <input id="main-search" name="q" placeholder="Search" size="5" type="search" />
        </div>
      </form>

      <div class="clear"></div>

      
      <h3 class="responsive-link visit-basho">
        <a href="http://www.basho.com">
          <div class="icon-container">
            <span aria-hidden="true" class="nav-icon" data-icon="&#xe003;"></span>
          </div>
          <span class="separator">&#124;</span>
          <span class="menu-title">Visit Basho</span>
          <div class="clear"></div>
        </a>
      </h3>

      
      <h3 class="responsive-link">
        <a href="/index.html">
          <div class="icon-container">
            <span aria-hidden="true" class="nav-icon" data-icon="&#xe003;"></span>
          </div>
          <span class="separator">&#124;</span>
          <span class="menu-title">All Riak Projects</span>
          <div class="clear"></div>
        </a>
      </h3>

      
      
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-riak"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/">Riak KV</a></span>
        <div class="clear"></div>
      </h3>
      
       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-download-alt"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/downloads/">Download Riak KV</a></span>
        <div class="clear"></div>
      </h3>
      
       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-install"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/setup/">Setup</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/planning/">Planning</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/start/">Start Planning</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/operating-system/">OS Support</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/planning/backend/">Choosing a Backend</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/bitcask/">Bitcask</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/leveldb/">LevelDB</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/memory/">Memory</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/multi/">Multi-backend</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/cluster-capacity/">Cluster Capacity</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/bitcask-capacity-calc/">Bitcask Capacity Calculator</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/best-practices/">Best Practices</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/future/">Planning for the Future</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/installing/">Installing</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/amazon-web-services/">Amazon Web Services</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/debian-ubuntu/">Debian &amp; Ubuntu</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/freebsd/">FreeBSD</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/mac-osx/">Mac OS X</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/rhel-centos/">RHEL &amp; CentOS</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/smartos/">SmartOS</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/solaris/">Solaris</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/suse/">SUSE</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/windows-azure/">Windows Azure</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/installing/source/">Installing From Source</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/source/erlang/">Installing Erlang</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/source/jvm/">Installing the JVM</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/verify/">Verifying an Installation</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/upgrading/">Upgrading</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/checklist/">Production Checklist</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/version/">Upgrading by Version</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/cluster/">Upgrading a Cluster</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/multi-datacenter/">Upgrading Multi-Datacenter</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/downgrade/">Downgrading</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-cog"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/configuring/">Configuring</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/basic/">Basic Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/backend/">Backend Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/managing/">Managing Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/reference/">Configuration Reference</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/strong-consistency/">Implementing Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/load-balancing-proxy/">Load Balancing &amp; Proxy</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/mapreduce/">MapReduce Settings</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/search/">Search Settings</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/configuring/v3-multi-datacenter/">V3 Multi-Datacenter</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v3-multi-datacenter/quick-start/">Quickstart</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v3-multi-datacenter/nat/">With NAT</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v3-multi-datacenter/ssl/">SSL</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/configuring/v2-multi-datacenter/">V2 Multi-Datacenter</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v2-multi-datacenter/quick-start/">Quickstart</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v2-multi-datacenter/nat/">With NAT</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v2-multi-datacenter/ssl/">SSL</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-database"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/using/">Using</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/running-a-cluster/">Running a Cluster</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/admin/">Cluster Administration</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/commands/">Cluster Admin Commands</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/riak-admin/">riak-admin CLI</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/riak-cli/">riak CLI</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/riak-control/">Riak Control</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/cluster-operations/">Cluster Operations</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/adding-removing-nodes/">Adding/Removing Nodes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/changing-cluster-info/">Changing Cluster Information</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/replacing-node/">Replacing a Node</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/inspecting-node/">Inspecting a Node</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/bucket-types/">Bucket Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/logging/">Logging</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/backing-up/">Backing Up</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/handoff/">Handoff</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/object-deletion/">Object Deletion</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/secondary-indexes/">Secondary Indexes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/monitoring-strong-consistency/">Monitoring Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/load-balancing/">Load Balancing</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/backend/">Backend</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/v3-multi-datacenter/">V3 Multi-Datacenter</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/v2-multi-datacenter/">V2 Multi-Datacenter</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/repair-recovery/">Repair &amp; Recovery</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/failure-recovery/">Failure &amp; Recovery</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/errors/">Errors</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/repairs/">Repairs</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/rolling-restart/">Rolling Restarts</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/security/">Security</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/basics/">Security Basics</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/managing-sources/">Managing Security Sources</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/best-practices/">Best Practices</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/v2-v3-ssl-ca/">V2/V3 SSL &amp; CA Validation</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/performance/">Performance</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/benchmarking/">Benchmarking</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/open-files-limit/">Open Files Limit</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/v2-scheduling-fullsync/">V2 Scheduling Fullsync</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/multi-datacenter-tuning/">Multi-Datacenter Replication</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/troubleshooting/">Troubleshooting</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/">Product Advisories</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/210-dataloss/">Default Configuration For Handoff May Cause Data Loss</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/appconfig-foward/">Forward Incompatibility of app.config</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/dvv-lastwritewins/">Incompatibility between Dotted Version Vectors and Last Write Wins</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/maps-204/">Map Data Type Disk Incompatibility</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/ssl-poodle/">SSL 3.0 Vulnerability and POODLE Attack</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/http-204/">HTTP 204</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/reference/">Reference</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/logging/">Logging</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/handoff/">Handoff</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/bucket-types/">Bucket Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/object-deletion/">Object Deletion</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/runtime-interaction/">Runtime Interaction</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/failure-recovery/">Failure &amp; Recovery</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/monitoring/">Monitoring</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/search-secondary-indexes/">Search &amp; Secondary Indexes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/strong-consistency/">Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/multi-datacenter/">Multi-Datacenter</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/v3/">V3 Replication</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/v2/">V2 Replication</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/architecture/">Architecture</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-lambda"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/developing/">Developing</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/">Getting Started</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/java/">Java</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/java/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/java/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/java/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/ruby/">Ruby</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/ruby/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/ruby/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/ruby/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/python/">Python</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/python/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/python/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/python/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/csharp/">C Sharp</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/csharp/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/csharp/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/csharp/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/nodejs/">NodeJS</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/nodejs/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/nodejs/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/nodejs/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/erlang/">Erlang</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/erlang/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/erlang/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/erlang/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/golang/">Go</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/golang/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/golang/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/golang/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/php/">PHP</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/php/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/php/querying/">Querying</a>
  
  </li></ul>

  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/usage/">Usage</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/creating-objects/">Creating Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/reading-objects/">Reading Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/updating-objects/">Updating Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/deleting-objects/">Deleting Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/content-types/">Content Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/search/">Searching</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/mapreduce/">Using MapReduce</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/secondary-indexes/">Using Secondary Indexes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/bucket-types/">Bucket Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/commit-hooks/">Using Commit Hooks</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/search-schemas/">Creating Search Schemas</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/searching-data-types/">Searching with Data Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/document-store/">Implementing a Document Store</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/custom-extractors/">Custom Extractors</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/usage/security/">Security</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/java/">Java</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/ruby/">Ruby</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/python/">Python</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/erlang/">Erlang</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/php/">PHP</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/replication/">Replication</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/">Conflict Resolution</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/java/">Java</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/ruby/">Ruby</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/python/">Python</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/csharp/">C Sharp</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/nodejs/">NodeJS</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/php/">PHP</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/golang/">Go</a>
  
  </li></ul>

  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/data-types/">Data Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/data-modeling/">Data Modeling</a>
  
  </li>
  <li class="current">
  
    <h4><span><a href="/riak/kv/2.1.3/developing/app-guide/">Application Guide</a></span></h4>
    
<ul class="depth-2" style="display: block;">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/replication-properties/">Replication Properties</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/strong-consistency/">Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/write-once/">Write Once</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/reference/">Reference</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/client-libraries/">Client Libraries</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/api/">APIs</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/api/repl-hooks/">V2 Multi-Datacenter REPL Hooks API</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/api/backend/">Backend API</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/faq/">Developing FAQ</a>
  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-beaker"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/learn/">Learning</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <a href="/riak/kv/2.1.3/learn/why-riak-kv/">Why Riak KV?</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/use-cases/">Use Cases</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/new-to-nosql/">New to NoSQL?</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/glossary/">Riak KV Glossary</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/learn/concepts/">Concepts</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/active-anti-entropy/">Active Anti-Entropy</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/buckets/">Buckets</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/capability-negotiation/">Capability Negotiation</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/causal-context/">Causal Context</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/clusters/">Clusters</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/crdts/">Data Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/eventual-consistency/">Eventual Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/keys-and-objects/">Keys and Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/replication/">Replication</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/vnodes/">Vnodes</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-comments"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/community">Community</a></span>
        <div class="clear"></div>
      </h3>
      <ul></ul> 
    </div>
  </nav>

  
  <ul id="fixed-nav">
    <li>
      <a href="https://github.com/basho/basho_docs" target="_blank">
        <div class="icon-container">
          <span aria-hidden="true" class="nav-icon" data-icon="&#xe004;"></span>
        </div>
        <span class="separator">&#124;</span>Available on GitHub
      </a>
    </li>
    <li>
      <a href="/riak/latest/community/">
        <div class="icon-container">
          <span aria-hidden="true" class="nav-icon" data-icon="&#xf059;"></span>
        </div>
        <span class="separator">&#124;</span>Get Help
      </a>
    </li>
  </ul>
</aside>


  <script>
  (function() {
    var cx = '011972015458788978446:zgdcy4fa-o0';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<div style="width:0px;overflow:hidden;height:0px;">
  <gcse:search></gcse:search>
</div>


  <div role="main">

    <header class="masthead">
  <div id="header">
    
    <div id="header-inner">
      <div class="icon-reorder" id="nav-toggle"></div>

      <div id="top-nav">
        
        <a href="/riak/kv/2.1.3/downloads/"><span class="icon-download-alt"></span>Downloads</a>
        <div id="nav-more"><span class="icon-more"></span></div>
      </div>

      <a class="responsive-toggle"></a>
      
      
      <a class="logo" href="/index.html"><h1>Riak Docs</h1></a>
      
      <span class="tagline">Product tutorials, how-tos, and fully-documented APIs.</span>
      <div id="nav-menu">
        <h2>Links</h2>
        <ul>
          <li><a href="http://docs.basho.com/">Docs Home</a></li>
          <li><a href="http://basho.com/">Basho Website</a></li>
        </ul>
        
        <div id="nav-menu-arrow"></div>
        <div id="nav-menu-arrow-back"></div>
      </div>

      <div class="clear"></div>

      <div class="header-rule"></div>
    </div>
  </div>
</header>


    <article class="mainarticle">

      <div class="versions">
  <div id="version-ddown-button" class="unselected">
    <div class="version-ddown-title">Version</div>
    <div class="version-ddown-number">2.1.3</div>
    <div class="version-ddown-arrow"></div>
  </div>
  <ol id="version-list" style="display: none;">
  
  
    
    
      
      
      <li class="sans versions-0 current">DEV</li>
      
      <li class="current versions-0"><a class="versioned" href="/riak/kv/2.1.3/developing/app-guide/">2.1.3</a></li>
    
    
      
      
      
      <li class=" versions-0 first"><a class="versioned" href="/riak/kv/2.1.1/developing/app-guide/">2.1.1</a></li>
    
  
    
    
      
      
      
      <li class="sans versions-1 current">LTS</li>
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.6/developing/app-guide/">2.0.6</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.5/developing/app-guide/">2.0.5</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.4/developing/app-guide/">2.0.4</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.2/developing/app-guide/">2.0.2</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.1/developing/app-guide/">2.0.1</a></li>
    
    
      
      
      
      <li class=" versions-1 first"><a class="versioned" href="/riak/kv/2.0.0/developing/app-guide/">2.0.0</a></li>
    
  
  
  <li class="versions-5 first"><a class="sans versioned" href="http://docs.basho.com/riak/1.4.12/">older</a></li>
  </ol>
</div>


      
      

      <header><h1>Riak KV Application Guide</h1></header>

      

      
      <nav id="toc">
        <h2 class="title">Contents</h2>
        <div id="toc-wrapper">
          <ol id="toc-items"></ol>
        </div>
      </nav>
      

      

<p>So you&rsquo;ve decided to build an application using Riak as a data store. We
think that this is a wise choice for a broad variety of use cases. But
using Riak isn&rsquo;t always straightforward, especially if you&rsquo;re used to
developing with relational databases like like MySQL or PostgreSQL or
non-persistent key/value stores like Redis. So in this guide, we&rsquo;ll walk
you through a set of questions that should be asked about your use case
before getting started. The answer to those questions may inform
decisions about which Riak features you should use, what kind of
replication and conflict resolution strategies you should employ, and
perhaps even how parts of your application should be built.</p>

<h2 id="what-kind-of-data-are-you-storing:d680e8a854a7cbad6d490c445cba2eba">What Kind of Data Are You Storing?</h2>

<p>This is an important initial question for two reasons:</p>

<ol>
<li>Not all data is a good fit for Riak. If your data isn&rsquo;t a good fit,
we would advise that you seek out a storage system that better suits
your needs.</li>
<li>The kinds of data that you&rsquo;re storing should guide your decision both
about <em>how</em> to store and access your data in Riak and about which Riak
features would be helpful (and which ones might even be harmful).</li>
</ol>

<h3 id="good-fits-for-riak:d680e8a854a7cbad6d490c445cba2eba">Good Fits for Riak</h3>

<p>Riak tends to be an excellent choice if you&rsquo;re dealing with any of the
following:</p>

<ul>
<li><strong>Immutable data</strong> &mdash; While Riak provides several means of
[[resolving conflicts|Conflict Resolution]] between different replicas
of objects, those processes can lead to slower performance in some
cases. Storing immutable data means that you can avoid those processes
altogether and get the most out of Riak.</li>
<li><strong>Small objects</strong> &mdash; Riak was not built as a store for large objects
like video files or other
<a href="http://en.wikipedia.org/wiki/Binary_large_object">BLOB</a>s. We built
<a href="http://basho.com/riak-cloud-storage/">Riak CS</a> for that. Riak is
great, however, for JSON, [[log files|Use Cases#log-data]], [[sensor
data|Use Cases#sensor-data]], HTML files, and other objects that tend
to run smaller than 1 MB.</li>
<li><strong>Independent objects</strong> &mdash; Objects that do not have interdependencies
on other objects are a good fit for Riak&rsquo;s [[eventually
consistent|Eventual Consistency]] nature.</li>
<li><strong>Objects with &ldquo;natural&rdquo; keys</strong> &mdash; It is almost always advisable to
build keys for objects out of timestamps, [[usernames|User Accounts]],
or other [[&ldquo;natural&rdquo; markers|Key/Value Modeling]] that distinguish
that object from other objects. Data that can be modeled this way fits
nicely with Riak because Riak emphasizes extremely fast object lookup.</li>
<li><strong>Data compatible with [[Riak Data Types|Using Data Types]]</strong> &mdash; If
you&rsquo;re working with mutable data, one option is to run basic CRUD
operations on that data in a standard key/value fashion and either
manage conflict resolution yourself or allow Riak to do so. But if
your data can be modeled as a [[counter|Using Data Types#Counters]],
[[set|Using Data Types#Sets]], or [[map|Using Data Types#Map]], you
should seriously consider using [[Riak Data Types|Using Data Types]],
which can speed application development and transfer a great deal of
complexity away from the application and to Riak itself.</li>
</ul>

<h3 id="not-so-good-fits-for-riak:d680e8a854a7cbad6d490c445cba2eba">Not-so-good Fits for Riak</h3>

<p>Riak may not such be a good choice if you use it to store:</p>

<ul>
<li><strong>Objects that exceed 1-2MB in size</strong> &mdash; If you will be
storing a lot of objects over that size, we would recommend checking
out <a href="http://docs.basho.com/riakcs/latest/">Riak CS</a> instead, as Riak
CS was built to solve this problem. Storing large objects in Riak will
typically lead to substandard performance.</li>
<li><strong>Objects with complex interdependencies</strong> &mdash; If your data cannot be
easily denormalized or if it requires that objects can be easily
assembled into and accessible as larger wholes&mdash;think columns or
tables&mdash;then you might want to consider a relational database
instead.</li>
</ul>

<h3 id="conclusion:d680e8a854a7cbad6d490c445cba2eba">Conclusion</h3>

<p>If it sounds like Riak is a good choice for some or all of your
application&rsquo;s data needs, move on to the next sections, where you can
find out more about which Riak features are recommendable for your use
case, how you should model your data, and what kinds of data modeling
and development strategies we recommend.</p>

<h2 id="which-features-should-you-consider:d680e8a854a7cbad6d490c445cba2eba">Which Features Should You Consider?</h2>

<p>Basic CRUD key/value operations are almost always the most performant
operations when using Riak. If your needs can be served using CRUD
operations, we recommend checking out our tutorial on [[key/value
modeling]] for some basic guidelines. But if basic CRUD key/value
operations don&rsquo;t quite suffice for your use case, Riak offers a variety
of features that may be just what you&rsquo;re looking for. In the sections
immediately below, you can find brief descriptions of those features as
well as relevant links to Basho documentation.</p>

<h2 id="search:d680e8a854a7cbad6d490c445cba2eba">Search</h2>

<p>Riak Search provides you with <a href="http://lucene.apache.org/solr/">Apache
Solr</a>-powered full-text indexing and
querying on top of the scalability, fault tolerance, and operational
simplicity of Riak. Our motto for Riak Search: <strong>Write it like Riak.
Query it like Solr</strong>. That is, you can store objects in Riak [[like
normal|The Basics]] and run full-text queries on those objects later on
using the Solr API.</p>

<ul>
<li>[[Using Search]] &mdash; Getting started with Riak Search</li>
<li>[[Search Details]] &mdash; A detailed overview of the concepts and design
consideration behind Riak Search</li>
<li>[[Search Schema]] &mdash; How to create custom schemas for extracting data
from Riak Search</li>
</ul>

<h3 id="when-to-use-search:d680e8a854a7cbad6d490c445cba2eba">When to Use Search</h3>

<ul>
<li><strong>When you need a rich querying API</strong> &mdash; Riak Search gives you access
to the entirety of <a href="http://lucene.apache.org/solr/">Solr</a>&rsquo;s extremely
broad API, which enables you to query on the basis of wildcards,
strings, booleans, geolocation, ranges, language-specific fulltext,
and far more. You can even use Search in conjunction with [[Riak Data
Types|Using Data Types]] (documentation coming soon).</li>
</ul>

<div class="note">
<div class="title">Search is preferred for querying</div>
In general, you should consider Search to be the default choice for
nearly all querying needs that go beyond basic CRUD/KV operations. If
your use case demands some sort of querying mechanism and you're in
doubt about what to use, you should assume that Search is the right tool
for you.
</div>

<h3 id="when-not-to-use-search:d680e8a854a7cbad6d490c445cba2eba">When Not to Use Search</h3>

<ul>
<li><strong>When deep pagination is needed</strong> &mdash; At the moment, you should
consider [[secondary indexes|Using Secondary Indexes]] instead of
Search if your use case requires deep pagination. This will be
changed, however, in a future release of Riak, at which point you
should consider Search the default choice for <em>all</em> querying needs.</li>
<li><strong>In large clusters</strong> &mdash; In clusters larger than 8-10 nodes, you may
experience slower performance when using Search. In clusters of that
size, we would recommend using Search in a limited fashion, setting
up a separate, dedicated cluster for Search data, or finding another
solution.</li>
</ul>

<h2 id="riak-data-types:d680e8a854a7cbad6d490c445cba2eba">Riak Data Types</h2>

<p>When performing basic K/V operations, Riak is agnostic toward the actual
data stored within objects. Beginning with Riak 2.0, however, you now
have access to operations-based objects based on academic research on
<a href="http://hal.upmc.fr/docs/00/55/55/88/PDF/techreport.pdf">CRDTs</a>. Riak
Data Types enable you to update and read [[counters|Using Data
Types#counters]], [[sets|Using Data Types#sets]], and [[maps|Using Data
Types#maps]] directly in Riak, as well as [[registers|Data Types#maps]]
and [[flags|Data Types#maps]] inside of Riak maps.</p>

<p>The beauty of Riak Data Types is that all convergence logic is handled
by Riak itself according to deterministic, Data Type-specific rules,
which means that your application doesn&rsquo;t need to reason about
[[siblings|Conflict Resolution#Siblings]]. In many cases, this can
unburden applications of the need to handle object convergence on their
own.</p>

<ul>
<li>[[Using Data Types]] &mdash; A guide to setting up Riak to use Data Types,
including a variety of code samples for all of the Basho&rsquo;s official
[[client libraries]]</li>
<li>[[Data Types]] &mdash; A theoretical treatment of Riak Data Types, along
with implementation details</li>
<li>[[Data Modeling with Riak Data Types]] &mdash; An object modeling example
that relies on Riak Data Types</li>
</ul>

<p><strong>Note</strong>: Riak Data Types can be used in conjunction with Riak Search,
meaning that the data stored in counters, sets, and maps can be indexed
and searched just like any other data in Riak. Documentation on Data
Types and Search is coming soon.</p>

<h3 id="when-to-use-riak-data-types:d680e8a854a7cbad6d490c445cba2eba">When to Use Riak Data Types</h3>

<ul>
<li><strong>When your data fits</strong> &mdash; If the data that you&rsquo;re storing can be
modeled as one of the five available types, Riak Data Types could be a
very good option. Please note that in many cases there may not be a
1:1 correspondence between the five available types and the data that
you&rsquo;d like to store, but there may be workarounds to close the gap.
Most things that can be stored as JSON, for example, can be stored as
maps (though with modifications).</li>
<li><strong>When you don&rsquo;t need to reason about siblings</strong> &mdash; If your use case
doesn&rsquo;t require that your application have access to siblings and
allows for sibling convergence logic to take place at the Riak level
rather than at the application level, then Riak Data Types are well
worth exploring.</li>
</ul>

<h3 id="when-not-to-use-riak-data-types:d680e8a854a7cbad6d490c445cba2eba">When Not to Use Riak Data Types</h3>

<ul>
<li><strong>When you need to provide your own convergence logic</strong> &mdash; If your
application needs to have access to all sibling values, then Riak Data
Types are not a good choice because they by definition do not produce
siblings.</li>
<li><strong>When your data just doesn&rsquo;t fit</strong> &mdash; While the five existing Data
Types allow for a great deal of flexibility and a wide range of use
cases, they don&rsquo;t cover all use cases. If you have data that requires
a modeling solution that can&rsquo;t be covered, you should stick to
standard K/V operations.</li>
<li><strong>When object size is of significant concern</strong> &mdash; Riak Data Types
behave much like other Riak objects, but they tend to carry more
metadata than normal Riak objects, especially maps. In most cases the
metadata payload will be a small percentage of the object&rsquo;s total
size, but if you want to keep objects as lean as possible, it may be
better to stick to normal K/V operations.</li>
</ul>

<h2 id="mapreduce:d680e8a854a7cbad6d490c445cba2eba">MapReduce</h2>

<p>Riak&rsquo;s MapReduce feature enables you to perform batch processing jobs in
a way that leverages Riak&rsquo;s distributed nature. When a MapReduce job is
sent to Riak, Riak automatically distributes the processing work to
where the target data lives, which can reduce network bandwidth. Riak
comes equipped with a set of default MapReduce jobs that you can employ,
or you can write and run your own MapReduce jobs in
<a href="http://www.erlang.org/">Erlang</a>.</p>

<ul>
<li>[[Using MapReduce]] &mdash; A general guide to using MapReduce</li>
<li>[[Advanced MapReduce]] &mdash; A more in-depth guide to MapReduce,
including code samples and implementation details</li>
</ul>

<h3 id="when-to-use-mapreduce:d680e8a854a7cbad6d490c445cba2eba">When to Use MapReduce</h3>

<ul>
<li><strong>Batch processing only</strong> &mdash; You should use MapReduce only when truly
truly necessary. MapReduce jobs are very computationally expensive and
can degrade performance in production clusters. You should restrict
MapReduce usage to infrequent batch processing operations, preferably
carried out at times when your cluster is experiencing load that is
well below average.</li>
</ul>

<h3 id="when-not-to-use-mapreduce:d680e8a854a7cbad6d490c445cba2eba">When Not to Use MapReduce</h3>

<ul>
<li><strong>When another Riak feature will do</strong> &mdash; Before even considering
using MapReduce, you should thoroughly investigate [[Riak Search|Using
Search]] or [[secondary indexes|Using Secondary Indexes]] as possible
solutions to your needs.</li>
</ul>

<p>In general, you should not think of MapReduce as, for example, Hadoop
within Riak. While it can be useful for certain types of
non-primary-key-based queries, it is neither a &ldquo;Big Data&rdquo; processing
tool nor an indexing mechanism nor a replacement for [[Riak Search|Using
Search]]. If you do need a tool like Hadoop or Apache Spark, you should
consider using Riak in conjunction with a more suitable data processing
tool.</p>

<h2 id="secondary-indexes-2i:d680e8a854a7cbad6d490c445cba2eba">Secondary Indexes (2i)</h2>

<p>Using basic key/value operations in Riak sometimes leads to the
following problem: how do I know which keys I should look for? Secondary
indexes (2i) provide a solution to this problem, enabling you to tag
objects with either binary or integer metadata and then query Riak for
all of the keys that share specific tags. 2i is especially useful if
you&rsquo;re storing binary data that is opaque to features like [[Riak
Search|Using Search]].</p>

<ul>
<li>[[Using Secondary Indexes]] &mdash; A general guide to using 2i, along
with code samples and information on 2i features like pagination,
streaming, and sorting</li>
<li>[[Advanced Secondary Indexes]] &mdash; Implementation details behind 2i</li>
</ul>

<h3 id="when-to-use-secondary-indexes:d680e8a854a7cbad6d490c445cba2eba">When to Use Secondary Indexes</h3>

<ul>
<li><strong>When you require deep pagination</strong> &mdash; At the moment, 2i&rsquo;s
deep pagination capabilities are more performant than those offered
by Search if you require pagination of more than 3-5 pages. This
will change, however, in the future, at which point we will
recommend using Search instead.</li>
</ul>

<h3 id="when-not-to-use-secondary-indexes:d680e8a854a7cbad6d490c445cba2eba">When Not to Use Secondary Indexes</h3>

<ul>
<li><strong>For most querying purposes</strong> &mdash; If your use case does not
involve deep pagination, we recommend Search over 2i for <em>all</em>
querying purposes.</li>
<li><strong>If you&rsquo;re using Bitcask</strong> &mdash; 2i is available only in the
[[LevelDB]] backend. If you&rsquo;d like to use [[Bitcask]] or the
[[Memory]] backend, you will not be able to use 2i.</li>
</ul>

<h2 id="mixed-approach:d680e8a854a7cbad6d490c445cba2eba">Mixed Approach</h2>

<p>One thing to always bear in mind is that Riak enables you to mix and
match a wide variety of approaches in a single cluster. You can use
basic CRUD operations for some of your data, index some of your data to
be queried by Riak Search, use Riak Data Types for another subset, etc.
You are always free to use a wide array of Riak features&mdash;or you can
use none at all and stick to key/value operations.</p>

<h2 id="how-should-you-model-your-data:d680e8a854a7cbad6d490c445cba2eba">How Should You Model Your Data?</h2>

<p>It&rsquo;s difficult to offer universally applicable data modeling guidelines
because data models differ so markedly from use case to use case. What
works when storing [[user data|Use Cases#user-data]], for example, might
be a poor fit when working with [[sensor data|Use Cases#sensor-data]].
Nonetheless, there&rsquo;s a variety of material in our documentation that
might be helpful when thinking about data modeling:</p>

<ul>
<li>[[Object Modeling in Riak|Taste of Riak: Object Modeling]]

<ul>
<li>[[Java|Taste of Riak: Object Modeling with Java]]</li>
<li>[[Ruby|Taste of Riak: Object Modeling with Ruby]]</li>
<li>[[Python|Taste of Riak: Object Modeling with Python]]</li>
<li>[[C#|Taste of Riak: Object Modeling with CSharp]]</li>
<li>[[Erlang|Taste of Riak: Object Modeling with Erlang]]</li>
</ul></li>
<li>[[Key/Value Modeling]]</li>
</ul>

<h3 id="data-types:d680e8a854a7cbad6d490c445cba2eba">Data Types</h3>

<p>One feature to always bear in mind when using Riak is [[Riak Data
Types|Using Data Types]]. If some or all of your data can be modeled in
accordance with one of the available Data Types&mdash;flags (similar to
Booleans), registers (good for storing small binaries or text snippets),
[[counters|Using Data Types#counters]], [[sets|Using Data Types#sets]],
or [[maps|Using Data Types#maps]]&mdash;you might be able to streamline
application development by using them as an alternative to key/value
operations. In some cases, it might even be worthwhile to transform your
data modeling strategy in accordance with To see if this feature might
be a good fit for your application, we recommend checking out the
following documentation:</p>

<ul>
<li>[[Data Types]]</li>
<li>[[Using Data Types]]</li>
<li>[[Data Modeling with Riak Data Types]]</li>
</ul>

<h2 id="what-are-your-consistency-requirements:d680e8a854a7cbad6d490c445cba2eba">What are Your Consistency Requirements?</h2>

<p>Riak has traditionally been thought of as an [[eventually
consistent|Eventual Consistency]], AP system, i.e. as a system that
favors availability and partition tolerance over data consistency. In
Riak versions 2.0 and later, the option of applying strong consistency
guarantees is available to developers that want to use Riak as a strict
CP system. One of the advantages of Riak&rsquo;s approach to strong
consistency is that you don&rsquo;t need to store all of your data in a
strongly consistent fashion if you use this feature. Instead, you can
mix and match a CP approach with an AP approach in a single cluster in
any way you wish.</p>

<p>If you need some or all of your data to be subject to strong consistency
requirements, we recommend checking out the following documentation:</p>

<ul>
<li>[[Strong Consistency]]</li>
<li>[[Using Strong Consistency]]</li>
<li>[[Managing Strong Consistency]]</li>
</ul>

<h2 id="are-your-objects-mutable:d680e8a854a7cbad6d490c445cba2eba">Are Your Objects Mutable?</h2>

<p>Although Riak always performs best when storing and retrieving immutable
data, Riak also handles mutable objects very ably using a variety of
eventual consistency principles. Storing mutable data in Riak, however,
can get tricky because it requires you to choose and implement a
conflict resolution strategy for when object conflicts arise, which is a
normal occurrence in Riak. For more implementation details, we recommend
checking out the following docs:</p>

<ul>
<li>[[Conflict Resolution]]</li>
<li>[[Object Updates]]</li>
<li>[[Replication Properties]]</li>
</ul>

<h2 id="getting-started:d680e8a854a7cbad6d490c445cba2eba">Getting Started</h2>

<p>If you have a good sense of how you will be using Riak for your
application (or if you just want to experiment), the following guides
will help you get up and running:</p>

<ul>
<li>[[Five-Minute Install]] &mdash; Install Riak and start up a 5-node Riak
cluster</li>
<li>[[Client Libraries]] &mdash; A listing of official and non-official client
libraries for building applications with Riak</li>
<li>[[Getting Started with Client
Libraries|Five-Minute Install#Setting-Up-Your-Riak-Client]] &mdash; How to
get up and going with one of Basho&rsquo;s official client libraries (Java,
Ruby, Python, and Erlang)</li>
<li>[[The Basics]] &mdash; A guide to basic key/value operations in Riak</li>
<li>[[Riak Glossary]] &mdash; A listing of frequently used terms in Riak&rsquo;s
documentation</li>
</ul>


      <div class="clear"></div>

    </article>

    <footer class="mastfooter">
    This work is licensed under a
    <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
        Creative Commons Attribution 4.0 International Public License
    </a><br>
    &copy; 2011-2016&nbsp;<a href="http://www.basho.com">Basho Technologies, Inc.</a>
</footer>


  </div>

  <script src="/js/all.js" type="text/javascript"></script>
<script type= "text/javascript">
  
  hljs.configure({languages: []});
  hljs.initHighlighting();

  
  
  
  $(function() {
    $(".js_enabled pre").css("visibility", "visible");
  });
</script>


</body>
</html>
