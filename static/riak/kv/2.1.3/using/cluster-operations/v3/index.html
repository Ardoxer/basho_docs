<!DOCTYPE html>

<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"></html><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"></html><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"></html><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->




<head class="tutorials">
  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width">
  <meta name="project" content="riak_kv">
  <meta name="version" content="2.1.3">
  <meta name="base-url" content="">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  <title>Multi-Datacenter Replication v3 Operations</title>

  <link href="/css/all.css" media="screen" rel="stylesheet" type="text/css">
  <link href="/css/print.css" media="print" rel="stylesheet" type="text/css">

  
  <style type="text/css"> .js_enabled pre { visibility : hidden; } </style>
  <script type="text/javascript">
    document.documentElement.className = 'js_enabled';
  </script>
</head>



<body class="riak_kv 2.1.3 latest ">

  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-T9C8MK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-T9C8MK');</script>

  
<aside id="nav-container" role="complementary">
  <nav class="overview" id="primary-nav" role="nav">
    <div id="primary-nav-content">
      <h2 class="responsive-link"><a class="responsive-toggle"></a></h2>

      
      <form id="searchbox_011972015458788978446:zgdcy4fa-o0" action="">
        <div class="nav-field-container">
          <div id="icon-container-search">
            <div class="icon-container"><span aria-hidden="true" class="nav-icon-search icon-search"></span></div>
            <span class="separator">&#124;</span>
          </div>
          <input id="main-search" name="q" placeholder="Search" size="5" type="search" />
        </div>
      </form>

      <div class="clear"></div>

      
      <h3 class="responsive-link visit-basho">
        <a href="http://www.basho.com">
          <div class="icon-container">
            <span aria-hidden="true" class="nav-icon" data-icon="&#xe003;"></span>
          </div>
          <span class="separator">&#124;</span>
          <span class="menu-title">Visit Basho</span>
          <div class="clear"></div>
        </a>
      </h3>

      
      <h3 class="responsive-link">
        <a href="/index.html">
          <div class="icon-container">
            <span aria-hidden="true" class="nav-icon" data-icon="&#xe003;"></span>
          </div>
          <span class="separator">&#124;</span>
          <span class="menu-title">All Riak Projects</span>
          <div class="clear"></div>
        </a>
      </h3>

      
      
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-riak"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/">Riak KV</a></span>
        <div class="clear"></div>
      </h3>
      
       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-download-alt"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/downloads/">Download Riak KV</a></span>
        <div class="clear"></div>
      </h3>
      
       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-install"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/setup/">Setup</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/planning/">Planning</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/start/">Start Planning</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/operating-system/">OS Support</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/planning/backend/">Choosing a Backend</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/bitcask/">Bitcask</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/leveldb/">LevelDB</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/memory/">Memory</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/multi/">Multi-backend</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/cluster-capacity/">Cluster Capacity</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/bitcask-capacity-calc/">Bitcask Capacity Calculator</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/best-practices/">Best Practices</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/future/">Planning for the Future</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/installing/">Installing</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/amazon-web-services/">Amazon Web Services</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/debian-ubuntu/">Debian &amp; Ubuntu</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/freebsd/">FreeBSD</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/mac-osx/">Mac OS X</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/rhel-centos/">RHEL &amp; CentOS</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/smartos/">SmartOS</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/solaris/">Solaris</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/suse/">SUSE</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/windows-azure/">Windows Azure</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/installing/source/">Installing From Source</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/source/erlang/">Installing Erlang</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/source/jvm/">Installing the JVM</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/verify/">Verifying an Installation</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/upgrading/">Upgrading</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/checklist/">Production Checklist</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/version/">Upgrading by Version</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/cluster/">Upgrading a Cluster</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/multi-datacenter/">Upgrading Multi-Datacenter</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/downgrade/">Downgrading</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-cog"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/configuring/">Configuring</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/basic/">Basic Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/backend/">Backend Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/managing/">Managing Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/reference/">Configuration Reference</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/strong-consistency/">Implementing Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/load-balancing-proxy/">Load Balancing &amp; Proxy</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/map-reduce/">MapReduce Settings</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/search/">Search Settings</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v3-multi-datacenter/">V3 Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v2-multi-datacenter/">V2 Configuration</a>
  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-database"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/using/">Using</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/reference/">Reference</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/logging/">Logging</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/handoff/">Handoff</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/bucket-types/">Bucket Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/object-deletion/">Object Deletion</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/runtime-interaction/">Runtime Interaction</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/failure-recovery/">Failure &amp; Recovery</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/monitoring/">Monitoring</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/search-secondary-indexes/">Search &amp; Secondary Indexes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/strong-consistency/">Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/multi-datacenter/">Multi-Datacenter</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/v3/">V3 Replication</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/v2/">V2 Replication</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/architecture/">Architecture</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/running-a-cluster/">Running a Cluster</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/admin/">Cluster Administration</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/commands/">Cluster Admin Commands</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/riak-admin/">riak-admin CLI</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/riak-cli/">riak CLI</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/riak-control/">Riak Control</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/cluster-operations/">Cluster Operations</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/adding-removing-nodes/">Adding/Removing Nodes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/changing-cluster-info/">Changing Cluster Information</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/replacing-node/">Replacing a Node</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/inspecting-node/">Inspecting a Node</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/bucket-types/">Bucket Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/logging/">Logging</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/backing-up/">Backing Up</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/handoff/">Handoff</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/object-deletion/">Object Deletion</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/secondary-indexes/">Secondary Indexes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/monitoring-strong-consistency/">Monitoring Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/load-balancing/">Load Balancing</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/backend/">Backend</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/multi-datacenter/">Multi-Datacenter</a>
  
  </li>
  <li class="current">
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/v3/">MDC V3</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/repair-recovery/">Repair &amp; Recovery</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/failure-recovery/">Failure &amp; Recovery</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/errors/">Errors</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/repairs/">Repairs</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/rolling-restart/">Rolling Restarts</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/security/">Security</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/basics/">Security Basics</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/managing-sources/">Managing Security Sources</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/best-practices/">Best Practices</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/v2-v3-ssl-ca/">V2/V3 SSL &amp; CA Validation</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/performance/">Performance</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/benchmarking/">Benchmarking</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/strong-consistency/">Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/v2-scheduling-fullsync/">V2 Scheduling Fullsync</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/multi-datacenter-tuning/">Multi-Datacenter Tuning</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/troubleshooting/">Troubleshooting</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/">Product Advisories</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/210-dataloss/">Default Configuration For Handoff May Cause Data Loss</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/appconfig-foward/">Forward Incompatibility of app.config</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/dvv-lastwritewins/">Incompatibility between Dotted Version Vectors and Last Write Wins</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/maps-204/">Map Data Type Disk Incompatibility</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/ssl-poodle/">SSL 3.0 Vulnerability and POODLE Attack</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/http-204/">HTTP 204</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-lambda"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/developing/">Developing</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/">Getting Started</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/java/">Java</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/java/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/java/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/java/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/ruby/">Ruby</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/ruby/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/ruby/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/ruby/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/python/">Python</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/python/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/python/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/python/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/csharp/">C Sharp</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/csharp/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/csharp/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/csharp/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/nodejs/">NodeJS</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/nodejs/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/nodejs/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/nodejs/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/erlang/">Erlang</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/erlang/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/erlang/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/erlang/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/golang/">Go</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/golang/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/golang/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/golang/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/usage/">Usage</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/creating-objects/">Creating Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/reading-objects/">Reading Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/updating-objects/">Updating Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/deleting-objects/">Deleting Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/content-types/">Content Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/searching/">Searching</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/mapreduce/">Using MapReduce</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/secondary-indexes/">Using Secondary Indexes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/bucket-types/">Using Bucket Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/commit-hooks/">Using Commit Hooks</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/search-schemas/">Creating Search Schemas</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/searching-data-types/">Searching with Data Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/document-store/">Implementing a Document Store</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/custom-extractors/">Custom Extractors</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/">Security</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/replication/">Replication</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/">Conflict Resolution</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/data-types/">Data Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/data-modeling/">Data Modeling</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/app-guide/">Application Guide</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/replication-properties/">Replication Properties</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/strong-consistency/">Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/write-once/">Write Once</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/reference/">Reference</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/client-libraries/">Client Libraries</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/api/">APIs</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/api/repl-hooks/">REPL Hooks API</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/api/backend/">Backend API</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/faq/">Developing FAQ</a>
  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-beaker"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/learn/">Learning</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <a href="/riak/kv/2.1.3/learn/why-riak-kv/">Why Riak KV?</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/use-cases/">Use Cases</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/new-to-nosql/">New to NoSQL?</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/glossary/">Riak KV Glossary</a>
  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-comments"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/community">Community</a></span>
        <div class="clear"></div>
      </h3>
      <ul></ul> 
    </div>
  </nav>

  
  <ul id="fixed-nav">
    <li>
      <a href="https://github.com/basho/basho_docs" target="_blank">
        <div class="icon-container">
          <span aria-hidden="true" class="nav-icon" data-icon="&#xe004;"></span>
        </div>
        <span class="separator">&#124;</span>Available on GitHub
      </a>
    </li>
    <li>
      <a href="/riak/latest/community/">
        <div class="icon-container">
          <span aria-hidden="true" class="nav-icon" data-icon="&#xf059;"></span>
        </div>
        <span class="separator">&#124;</span>Get Help
      </a>
    </li>
  </ul>
</aside>


  <script>
  (function() {
    var cx = '011972015458788978446:zgdcy4fa-o0';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<div style="width:0px;overflow:hidden;height:0px;">
  <gcse:search></gcse:search>
</div>


  <div role="main">

    <header class="masthead">
  <div id="header">
    
    <div id="header-inner">
      <div class="icon-reorder" id="nav-toggle"></div>

      <div id="top-nav">
        
        <a href="/riak/kv/2.1.3/downloads/"><span class="icon-download-alt"></span>Downloads</a>
        <div id="nav-more"><span class="icon-more"></span></div>
      </div>

      <a class="responsive-toggle"></a>
      
      
      <a class="logo" href="/index.html"><h1>Riak Docs</h1></a>
      
      <span class="tagline">Product tutorials, how-tos, and fully-documented APIs.</span>
      <div id="nav-menu">
        <h2>Links</h2>
        <ul>
          <li><a href="http://docs.basho.com/">Docs Home</a></li>
          <li><a href="http://basho.com/">Basho Website</a></li>
        </ul>
        
        <div id="nav-menu-arrow"></div>
        <div id="nav-menu-arrow-back"></div>
      </div>

      <div class="clear"></div>

      <div class="header-rule"></div>
    </div>
  </div>
</header>


    <article class="mainarticle">

      <div class="versions">
  <div id="version-ddown-button" class="unselected">
    <div class="version-ddown-title">Version</div>
    <div class="version-ddown-number">2.1.3</div>
    <div class="version-ddown-arrow"></div>
  </div>
  <ol id="version-list" style="display: none;">
  
  
    
    
      
      
      <li class="sans versions-0 current">DEV</li>
      
      <li class="current versions-0"><a class="versioned" href="/riak/kv/2.1.3/using/cluster-operations/v3/">2.1.3</a></li>
    
    
      
      
      
      <li class=" versions-0 first"><a class="versioned" href="/riak/kv/2.1.1/using/cluster-operations/v3/">2.1.1</a></li>
    
  
    
    
      
      
      
      <li class="sans versions-1 current">LTS</li>
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.6/using/cluster-operations/v3/">2.0.6</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.5/using/cluster-operations/v3/">2.0.5</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.4/using/cluster-operations/v3/">2.0.4</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.2/using/cluster-operations/v3/">2.0.2</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.1/using/cluster-operations/v3/">2.0.1</a></li>
    
    
      
      
      
      <li class=" versions-1 first"><a class="versioned" href="/riak/kv/2.0.0/using/cluster-operations/v3/">2.0.0</a></li>
    
  
  
  <li class="versions-5 first"><a class="sans versioned" href="http://docs.basho.com/riak/1.4.12/">older</a></li>
  </ol>
</div>


      
      

      <header><h1>Multi-Datacenter Replication v3 Operations</h1></header>

      

      
      <nav id="toc">
        <h2 class="title">Contents</h2>
        <div id="toc-wrapper">
          <ol id="toc-items"></ol>
        </div>
      </nav>
      

      

<p>This document explains how to manage replication with the <code>riak-repl</code>
command. Some of these commands can be set or behavior altered by
setting appropriate [[configuration|Multi Data Center Replication v3
Configuration]] values.</p>

<p>All commands need to be run only once on a single node of a cluster for
the changes to propagate to all other nodes. All changes will persist
across node restarts and will automatically take effect when nodes are
added to the cluster.</p>

<h2 id="cluster-connectivity:22bbf996cb7d95ccf05cc9ba38c3efec">Cluster Connectivity</h2>

<h4 id="clustername:22bbf996cb7d95ccf05cc9ba38c3efec">clustername</h4>

<p>Set the <code>clustername</code> for all nodes in a Riak cluster.</p>

<ul>
<li>Without a parameter, returns the current name of the cluster</li>
<li>With a parameter, names the current cluster</li>
</ul>

<p>To <strong>set</strong> the <code>clustername</code>:</p>

<ul>
<li>Syntax: <code>riak-repl clustername &lt;clustername&gt;</code></li>
<li>Example: <code>riak-repl clustername Boston</code></li>
</ul>

<p>To <strong>get</strong> the <code>clustername</code>:</p>

<ul>
<li>Syntax: <code>riak-repl clustername</code></li>
<li>Example: <code>riak-repl clustername</code></li>
</ul>

<h4 id="connect:22bbf996cb7d95ccf05cc9ba38c3efec">connect</h4>

<p>The <code>connect</code> command establishes communications from a source cluster
to a sink cluster of the same ring size. The <code>host:port</code> of the sink
cluster is used for this. The IP and port to connect to can be found in
the <code>advanced.config</code> of the remote cluster, under <code>riak_core</code> and
<code>cluster_mgr</code>.</p>

<p>The <code>host</code> can be either an IP address</p>

<ul>
<li>Syntax: <code>riak-repl connect &lt;ip&gt;:&lt;port&gt;</code></li>
<li>Example: <code>riak-repl connect 192.168.2.1:9080</code></li>
</ul>

<p>&hellip;or a hostname that will resolve to an IP address.</p>

<ul>
<li>Syntax: <code>riak-repl connect &lt;host&gt;:&lt;port&gt;</code></li>
<li>Example: <code>riak-repl connect Austin:9080</code></li>
</ul>

<h4 id="disconnect:22bbf996cb7d95ccf05cc9ba38c3efec">disconnect</h4>

<p>Disconnecting a source cluster from a sink cluster.</p>

<p>You may define a <code>host:port</code> combination</p>

<ul>
<li>Syntax: <code>riak-repl disconnect &lt;host&gt;:&lt;port&gt;</code></li>
<li>Example: <code>riak-repl disconnect 192.168.2.1:9080</code></li>
</ul>

<p>&hellip;or use the <em>name</em> of the cluster.</p>

<ul>
<li>Syntax: <code>riak-repl disconnect &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl disconnect Austin</code></li>
</ul>

<h4 id="connections:22bbf996cb7d95ccf05cc9ba38c3efec">connections</h4>

<p>Display a list of connections between source and sink clusters.</p>

<ul>
<li>Syntax: <code>riak-repl connections</code></li>
<li>Example: <code>riak-repl connections</code></li>
</ul>

<h4 id="clusterstats:22bbf996cb7d95ccf05cc9ba38c3efec">clusterstats</h4>

<p>Displays current cluster stats using an optional <code>ip:port</code> as well as an
optional <code>protocol-id</code>.</p>

<p><code>protocol-id</code> can be one of the following:</p>

<ul>
<li><code>cluster_mgr</code></li>
<li><code>rt_repl</code></li>
<li><code>fs_repl</code></li>
</ul>

<p>The <code>clusterstats</code> command in use:</p>

<ul>
<li>Syntax: <code>riak-repl clusterstats &lt;host&gt;:&lt;port&gt; &lt;protocol-id&gt;</code></li>
<li>Example: <code>riak-repl clusterstats 192.168.2.1:9080</code></li>
<li>Example: <code>riak-repl clusterstats 192.168.2.1:9080 fs_repl</code></li>
</ul>

<h2 id="realtime-replication-commands:22bbf996cb7d95ccf05cc9ba38c3efec">Realtime Replication Commands</h2>

<h4 id="realtime-enable:22bbf996cb7d95ccf05cc9ba38c3efec">realtime enable</h4>

<p>Enable realtime replication from a source cluster to sink clusters.</p>

<p>This will start queuing updates for replication. The cluster will still
require an invocation of <code>realtime start</code> for replication to occur.</p>

<ul>
<li>Syntax: <code>riak-repl realtime enable &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl realtime enable Austin</code></li>
</ul>

<h4 id="realtime-disable:22bbf996cb7d95ccf05cc9ba38c3efec">realtime disable</h4>

<p>Disable realtime replication from a source cluster to sink clusters.</p>

<ul>
<li>Syntax: <code>riak-repl realtime disable &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl realtime disable Austin</code></li>
</ul>

<h4 id="realtime-start:22bbf996cb7d95ccf05cc9ba38c3efec">realtime start</h4>

<p>Start realtime replication connections from a source cluster to sink
clusters. See also <code>realtime enable</code> (above).</p>

<ul>
<li>Syntax: <code>riak-repl realtime start &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl realtime start Austin</code></li>
</ul>

<h4 id="realtime-stop:22bbf996cb7d95ccf05cc9ba38c3efec">realtime stop</h4>

<p>Stop realtime replication from a source cluster to sink clusters.</p>

<ul>
<li>Syntax <code>riak-repl realtime stop &lt;sink_clustername&gt;</code></li>
<li>Example <code>riak-repl realtime stop Austin</code></li>
</ul>

<h2 id="fullsync-replication-commands:22bbf996cb7d95ccf05cc9ba38c3efec">Fullsync Replication Commands</h2>

<p>These behaviors can be altered by using the <code>advanced.config</code>
<code>fullsync_on_connect</code> parameter. See the [[Configuration Guide|Multi
Data Center Replication v3 Configuration]] for more information.</p>

<h4 id="fullsync-enable:22bbf996cb7d95ccf05cc9ba38c3efec">fullsync enable</h4>

<p>Enable fullsync replication from a source cluster to sink clusters. By
default, a fullsync will begin as soon as a connection to the remote
cluster is established.</p>

<ul>
<li>Syntax: <code>riak-repl fullsync enable &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl fullsync enable Austin</code></li>
</ul>

<h4 id="fullsync-disable:22bbf996cb7d95ccf05cc9ba38c3efec">fullsync disable</h4>

<p>Disables fullsync for a cluster.</p>

<ul>
<li>Syntax: <code>riak-repl fullsync disable &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl fullsync disable Austin</code></li>
</ul>

<h4 id="fullsync-start:22bbf996cb7d95ccf05cc9ba38c3efec">fullsync start</h4>

<p>Starts a fullsync. If the application configuration
<code>fullsync_on_connect</code> is set to <code>false</code>, a fullsync needs to be started
manually. This is also used to trigger a periodic fullsync using a cron
job. While a fullsync is in progress, a <code>start</code> command is ignored and a
message is logged.</p>

<ul>
<li>Syntax: <code>riak-repl fullsync start &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl fullsync start Austin</code></li>
</ul>

<h4 id="fullsync-stop:22bbf996cb7d95ccf05cc9ba38c3efec">fullsync stop</h4>

<p>Stops a fullsync.</p>

<ul>
<li>Syntax: <code>riak-repl fullsync stop &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl fullsync stop Austin</code></li>
</ul>

<h2 id="cascading-realtime-writes:22bbf996cb7d95ccf05cc9ba38c3efec">Cascading Realtime Writes</h2>

<p>See the [[Multi Data Center Replication: Cascading Realtime Writes]]
guide.</p>

<h4 id="realtime-cascades:22bbf996cb7d95ccf05cc9ba38c3efec">realtime cascades</h4>

<p>Shows the current cascading realtime setting.</p>

<ul>
<li>Syntax: <code>realtime cascades</code></li>
<li>Example: <code>riak-repl realtime cascades</code></li>
</ul>

<h4 id="realtime-cascades-always:22bbf996cb7d95ccf05cc9ba38c3efec">realtime cascades always</h4>

<p>Enable realtime cascading writes.</p>

<ul>
<li>Syntax: <code>realtime cascades always</code></li>
<li>Example: <code>riak-repl realtime cascades always</code></li>
</ul>

<h4 id="realtime-cascades-never:22bbf996cb7d95ccf05cc9ba38c3efec">realtime cascades never</h4>

<p>Disable realtime cascading writes.</p>

<ul>
<li>Syntax: <code>realtime cascades never</code></li>
<li>Example: <code>riak-repl realtime cascades never</code></li>
</ul>

<h2 id="nat:22bbf996cb7d95ccf05cc9ba38c3efec">NAT</h2>

<p><strong>Note</strong>: See the [[Configuration Guide|Multi Data Center Replication v3
With NAT]] for more information.</p>

<h4 id="nat-map-show:22bbf996cb7d95ccf05cc9ba38c3efec">nat-map show</h4>

<p>Show the current NAT mapping table.</p>

<ul>
<li>Syntax: <code>nat-map show</code></li>
<li>Example: <code>riak-repl nat-map show</code></li>
</ul>

<h4 id="nat-map-add:22bbf996cb7d95ccf05cc9ba38c3efec">nat-map add</h4>

<p>Adds a NAT map from the external IP, with an optional port, to an
internal IP.</p>

<ul>
<li>Syntax: <code>nat-map add &lt;externalip&gt;[:port] &lt;internalip&gt;</code></li>
<li>Example: <code>riak-repl nat-map add 128.205.106.1:5555 192.168.1.2</code></li>
</ul>

<h4 id="nat-map-del:22bbf996cb7d95ccf05cc9ba38c3efec">nat-map del</h4>

<p>Deletes a specific NAT map entry.</p>

<ul>
<li>Syntax: <code>nat-map del &lt;externalip&gt;[:port] &lt;internalip&gt;</code></li>
<li>Example: <code>riak-repl nat-map del 128.205.106.1:5555 192.168.1.2</code></li>
</ul>

<p>NAT changes will be applied once fullsync and/or realtime replication
has been stopped and started.</p>

<h2 id="riak-cs-mdc-gets:22bbf996cb7d95ccf05cc9ba38c3efec">Riak CS MDC Gets</h2>

<h4 id="proxy-get-enable:22bbf996cb7d95ccf05cc9ba38c3efec">proxy-get enable</h4>

<p>Enable Riak CS <code>proxy_get</code> requests from a <strong>sink</strong> cluster (if
<code>proxy_get</code> has been enabled in <code>advanced.config</code>).</p>

<ul>
<li>Syntax: <code>proxy-get enable  &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl proxy-get enable  newyorkbackup</code></li>
</ul>

<h4 id="proxy-get-disable:22bbf996cb7d95ccf05cc9ba38c3efec"><code>proxy-get disable</code></h4>

<p>Disable Riak CS <code>proxy_get</code> requests from a <strong>sink</strong> cluster (if
<code>proxy_get</code> has been enabled in <code>advanced.config</code>).</p>

<ul>
<li>Syntax: <code>proxy-get disable &lt;sink_clustername&gt;</code></li>
<li>Example: <code>riak-repl proxy-get disable newyorkbackup</code></li>
</ul>

<h4 id="add-block-provider-redirect:22bbf996cb7d95ccf05cc9ba38c3efec"><code>add-block-provider-redirect</code></h4>

<p>Provide a redirection to the <code>&lt;to-cluster-id&gt;</code> for <code>proxy_get</code> if the
<code>&lt;from-cluster&gt;</code> is going to be decommissioned.</p>

<ul>
<li>Syntax: <code>riak-repl add-block-provider-redirect &lt;from-cluster&gt; &lt;to-cluster&gt;</code></li>
<li>Example: <code>riak-repl add-block-provider-redirect &quot;{'dev1@127.0.0.1',{1391,544501,519016}}&quot; &quot;{'dev3@127.0.0.1',{1299,512501,511032}}&quot;</code></li>
</ul>

<h4 id="show-block-provider-redirect:22bbf996cb7d95ccf05cc9ba38c3efec"><code>show-block-provider-redirect</code></h4>

<p>Show the mapping for a given cluster-id redirect.</p>

<ul>
<li>Syntax: <code>riak-repl show-block-provider-redirect &lt;from-cluster&gt;</code></li>
<li>Example: <code>riak-repl show-block-provider-redirect &quot;{'dev1@127.0.0.1',{1391,544501,519016}}&quot;</code></li>
</ul>

<h4 id="delete-block-provider-redirect:22bbf996cb7d95ccf05cc9ba38c3efec"><code>delete-block-provider-redirect</code></h4>

<p>Delete a existing redirect such that proxy_gets go again to the original
provider cluster id.</p>

<ul>
<li>Syntax:* <code>riak-repl delete-block-provider-redirect &lt;from-cluster&gt;</code></li>
<li>Example:* <code>riak-repl delete-block-provider-redirect &quot;{'dev1@127.0.0.1', {1391,544501,519016}}&quot;</code></li>
</ul>

<h4 id="show-local-cluster-id:22bbf996cb7d95ccf05cc9ba38c3efec"><code>show-local-cluster-id</code></h4>

<p>Display this cluster&rsquo;s cluster-id tuple, for use with the
<code>*-block-provider-redirect</code> commands.</p>

<p><strong>Note</strong>: A cluster-id is surrounded by double quotes, which need to be
included when passed to <code>*-block-provider-redirect</code>.</p>

<ul>
<li>Syntax: <code>riak-repl show-local-cluster-id</code></li>

<li><p>Example:</p>

<pre><code class="language-bash">riak-repl show-local-cluster-id
</code></pre>

<p>Possible output:</p>

<pre><code>local cluster id: &quot;{'dev1@127.0.0.1',{1391,544501,519016}}&quot;
</code></pre></li>
</ul>

<h2 id="riak-repl-status-output:22bbf996cb7d95ccf05cc9ba38c3efec"><code>riak-repl</code> Status Output</h2>

<p>Details about the <code>riak-repl status</code> command can be found under
[[Statistics|Multi Data Center Replication: Statistics]].</p>

<h2 id="tuning:22bbf996cb7d95ccf05cc9ba38c3efec">Tuning</h2>

<p>These tuning values may also be set via the node&rsquo;s <code>advanced.config</code> file.
See the [[Configuration Guide|Multi Data Center Replication v3
Configuration]] for more information.</p>

<h4 id="fullsync-max-fssource-node:22bbf996cb7d95ccf05cc9ba38c3efec"><code>fullsync max_fssource_node</code></h4>

<p>This limits the number of fullsync workers that will be running on each
individual node in a source cluster. This is a hard limit for <em>all</em>
fullsyncs that are enabled. Additional fullsync configurations will
<em>not</em> increase the number of fullsync workers allowed to run on any
node. This only affects nodes on the source cluster on which this
parameter is defined via the configuration file or command line.</p>

<ul>
<li>Syntax: <code>riak-repl fullsync max_fssource_node &lt;value&gt;</code></li>
<li>Default: <code>1</code></li>
<li>Example: <code>riak-repl fullsync max_fssource_node 2</code></li>
</ul>

<h4 id="fullsync-max-fssource-cluster:22bbf996cb7d95ccf05cc9ba38c3efec"><code>fullsync max_fssource_cluster</code></h4>

<p>This is the hard limit of fullsync workers that will be running on the
source side of a cluster across all nodes on that cluster for a fullsync
to a sink cluster. This means if one has configured fullsync for two
different clusters, both with a max_fssource_cluster of 5, 10 fullsync
workers can be in progress. Only affects nodes on the source cluster on
which this parameter is defined via the configuration file or the
command line.</p>

<ul>
<li>Syntax: <code>riak-repl fullsync max_fssource_cluster &lt;value&gt;</code></li>
<li>Default: <code>5</code></li>
<li>Example: <code>riak-repl fullsync max_fssource_cluster 5</code></li>
</ul>

<h4 id="fullsync-max-fssink-node:22bbf996cb7d95ccf05cc9ba38c3efec"><code>fullsync max_fssink_node</code></h4>

<p>This limits the number of fullsync workers allowed to run on each
individual node in a sink cluster. This is a hard limit for each
fullsync source node interacting with a sink node. Thus, multiple
simultaneous source connections to a sink node will have to share the
sink node’s number of maximum connections. Only affects nodes on the
sink cluster on which this parameter is defined via the configuration
file or command line.</p>

<ul>
<li>Syntax: <code>riak-repl fullsync max_fssink_node &lt;value&gt;</code></li>
<li>Default: <code>1</code></li>
<li>Example: <code>riak-repl fullsync max_fssink_node 5</code></li>
</ul>

<h2 id="mixing-version-2-replication-with-version-3-replication:22bbf996cb7d95ccf05cc9ba38c3efec">Mixing Version 2 Replication with Version 3 Replication</h2>

<p>Riak Version 2 Replication and Version 3 Replication can be safely used
at the same time. If you choose to move to Version 3 Replication
completely, we recommend disabling Version 2 realtime
replication bucket hooks with the <code>riak-repl modes</code> command.</p>

<h4 id="riak-repl-modes:22bbf996cb7d95ccf05cc9ba38c3efec"><code>riak-repl modes</code></h4>

<p><code>modelist</code> is one or both of <code>mode_repl12</code> (Version 2) or <code>mode_repl13</code>
(Version 3) separated by spaces (without commas).</p>

<ul>
<li>Syntax: <code>riak-repl modes &lt;modelist&gt;</code></li>

<li><p>Example:</p>

<pre><code class="language-bash">riak-repl modes mode_repl12 mode_repl13
</code></pre>

<p>Possible output:</p>

<pre><code>Current replication modes: [mode_repl12,mode_repl13]
</code></pre></li>
</ul>

<p>To check the current replication modes:</p>

<ul>
<li>Syntax: <code>riak-repl modes</code></li>

<li><p>Example:</p>

<pre><code class="language-bash">riak-repl modes
</code></pre>

<p>Possible output:</p>

<pre><code>Current replication modes: [mode_repl12,mode_repl13]
</code></pre></li>
</ul>


      <div class="clear"></div>

    </article>

    <footer class="mastfooter">
    This work is licensed under a
    <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
        Creative Commons Attribution 4.0 International Public License
    </a><br>
    &copy; 2011-2016&nbsp;<a href="http://www.basho.com">Basho Technologies, Inc.</a>
</footer>


  </div>

  <script src="/js/all.js" type="text/javascript"></script>
<script type= "text/javascript">
  
  hljs.configure({languages: []});
  hljs.initHighlighting();

  
  
  
  $(function() {
    $(".js_enabled pre").css("visibility", "visible");
  });
</script>


</body>
</html>
