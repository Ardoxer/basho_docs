<!DOCTYPE html>

<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"></html><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"></html><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"></html><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->




<head class="tutorials">
  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width">
  <meta name="project" content="riak_kv">
  <meta name="version" content="2.1.3">
  <meta name="base-url" content="">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  <title>riak-admin Command Line Interface</title>

  <link href="/css/all.css" media="screen" rel="stylesheet" type="text/css">
  <link href="/css/print.css" media="print" rel="stylesheet" type="text/css">

  
  <style type="text/css"> .js_enabled pre { visibility : hidden; } </style>
  <script type="text/javascript">
    document.documentElement.className = 'js_enabled';
  </script>
</head>



<body class="riak_kv 2.1.3 latest ">

  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-T9C8MK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-T9C8MK');</script>

  
<aside id="nav-container" role="complementary">
  <nav class="overview" id="primary-nav" role="nav">
    <div id="primary-nav-content">
      <h2 class="responsive-link"><a class="responsive-toggle"></a></h2>

      
      <form id="searchbox_011972015458788978446:zgdcy4fa-o0" action="">
        <div class="nav-field-container">
          <div id="icon-container-search">
            <div class="icon-container"><span aria-hidden="true" class="nav-icon-search icon-search"></span></div>
            <span class="separator">&#124;</span>
          </div>
          <input id="main-search" name="q" placeholder="Search" size="5" type="search" />
        </div>
      </form>

      <div class="clear"></div>

      
      <h3 class="responsive-link visit-basho">
        <a href="http://www.basho.com">
          <div class="icon-container">
            <span aria-hidden="true" class="nav-icon" data-icon="&#xe003;"></span>
          </div>
          <span class="separator">&#124;</span>
          <span class="menu-title">Visit Basho</span>
          <div class="clear"></div>
        </a>
      </h3>

      
      <h3 class="responsive-link">
        <a href="/index.html">
          <div class="icon-container">
            <span aria-hidden="true" class="nav-icon" data-icon="&#xe003;"></span>
          </div>
          <span class="separator">&#124;</span>
          <span class="menu-title">All Riak Projects</span>
          <div class="clear"></div>
        </a>
      </h3>

      
      
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-riak"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/">Riak KV</a></span>
        <div class="clear"></div>
      </h3>
      
       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-download-alt"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/downloads/">Download Riak KV</a></span>
        <div class="clear"></div>
      </h3>
      
       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-install"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/setup/">Setup</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/planning/">Planning</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/start/">Start Planning</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/operating-system/">OS Support</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/planning/backend/">Choosing a Backend</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/bitcask/">Bitcask</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/leveldb/">LevelDB</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/memory/">Memory</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/backend/multi/">Multi-backend</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/cluster-capacity/">Cluster Capacity</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/bitcask-capacity-calc/">Bitcask Capacity Calculator</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/best-practices/">Best Practices</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/planning/future/">Planning for the Future</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/installing/">Installing</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/amazon-web-services/">Amazon Web Services</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/debian-ubuntu/">Debian &amp; Ubuntu</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/freebsd/">FreeBSD</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/mac-osx/">Mac OS X</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/rhel-centos/">RHEL &amp; CentOS</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/smartos/">SmartOS</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/solaris/">Solaris</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/suse/">SUSE</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/windows-azure/">Windows Azure</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/installing/source/">Installing From Source</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/source/erlang/">Installing Erlang</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/source/jvm/">Installing the JVM</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/installing/verify/">Verifying an Installation</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/setup/upgrading/">Upgrading</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/checklist/">Production Checklist</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/version/">Upgrading by Version</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/cluster/">Upgrading a Cluster</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/multi-datacenter/">Upgrading Multi-Datacenter</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/setup/upgrading/downgrade/">Downgrading</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-cog"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/configuring/">Configuring</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/basic/">Basic Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/backend/">Backend Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/managing/">Managing Configuration</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/reference/">Configuration Reference</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/strong-consistency/">Implementing Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/load-balancing-proxy/">Load Balancing &amp; Proxy</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/mapreduce/">MapReduce Settings</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/search/">Search Settings</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/configuring/v3-multi-datacenter/">V3 Multi-Datacenter</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v3-multi-datacenter/quick-start/">Quickstart</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v3-multi-datacenter/nat/">With NAT</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v3-multi-datacenter/ssl/">SSL</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/configuring/v2-multi-datacenter/">V2 Multi-Datacenter</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v2-multi-datacenter/quick-start/">Quickstart</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v2-multi-datacenter/nat/">With NAT</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/configuring/v2-multi-datacenter/ssl/">SSL</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-database"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/using/">Using</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/running-a-cluster/">Running a Cluster</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/admin/">Cluster Administration</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/commands/">Cluster Admin Commands</a>
  
  </li>
  <li class="current">
  
    <a href="/riak/kv/2.1.3/using/admin/riak-admin/">riak-admin CLI</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/riak-cli/">riak CLI</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/admin/riak-control/">Riak Control</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/cluster-operations/">Cluster Operations</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/adding-removing-nodes/">Adding/Removing Nodes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/changing-cluster-info/">Changing Cluster Information</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/replacing-node/">Replacing a Node</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/inspecting-node/">Inspecting a Node</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/bucket-types/">Bucket Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/logging/">Logging</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/backing-up/">Backing Up</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/handoff/">Handoff</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/object-deletion/">Object Deletion</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/secondary-indexes/">Secondary Indexes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/monitoring-strong-consistency/">Monitoring Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/load-balancing/">Load Balancing</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/backend/">Backend</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/v3-multi-datacenter/">V3 Multi-Datacenter</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/cluster-operations/v2-multi-datacenter/">V2 Multi-Datacenter</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/repair-recovery/">Repair &amp; Recovery</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/failure-recovery/">Failure &amp; Recovery</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/errors/">Errors</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/repairs/">Repairs</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/repair-recovery/rolling-restart/">Rolling Restarts</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/security/">Security</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/basics/">Security Basics</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/managing-sources/">Managing Security Sources</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/best-practices/">Best Practices</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/security/v2-v3-ssl-ca/">V2/V3 SSL &amp; CA Validation</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/performance/">Performance</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/benchmarking/">Benchmarking</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/open-files-limit/">Open Files Limit</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/v2-scheduling-fullsync/">V2 Scheduling Fullsync</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/performance/multi-datacenter-tuning/">Multi-Datacenter Replication</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/troubleshooting/">Troubleshooting</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/">Product Advisories</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/210-dataloss/">Default Configuration For Handoff May Cause Data Loss</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/appconfig-foward/">Forward Incompatibility of app.config</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/dvv-lastwritewins/">Incompatibility between Dotted Version Vectors and Last Write Wins</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/maps-204/">Map Data Type Disk Incompatibility</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/product-advisories/ssl-poodle/">SSL 3.0 Vulnerability and POODLE Attack</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/troubleshooting/http-204/">HTTP 204</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/using/reference/">Reference</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/logging/">Logging</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/handoff/">Handoff</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/bucket-types/">Bucket Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/object-deletion/">Object Deletion</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/runtime-interaction/">Runtime Interaction</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/failure-recovery/">Failure &amp; Recovery</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/monitoring/">Monitoring</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/search-secondary-indexes/">Search &amp; Secondary Indexes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/strong-consistency/">Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/multi-datacenter/">Multi-Datacenter</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/v3/">V3 Replication</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/v2/">V2 Replication</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/using/reference/architecture/">Architecture</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-lambda"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/developing/">Developing</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/">Getting Started</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/java/">Java</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/java/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/java/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/java/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/ruby/">Ruby</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/ruby/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/ruby/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/ruby/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/python/">Python</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/python/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/python/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/python/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/csharp/">C Sharp</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/csharp/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/csharp/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/csharp/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/nodejs/">NodeJS</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/nodejs/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/nodejs/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/nodejs/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/erlang/">Erlang</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/erlang/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/erlang/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/erlang/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/golang/">Go</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/golang/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/golang/querying/">Querying</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/golang/object-modeling/">Object Modeling</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/getting-started/php/">PHP</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/php/crud-operations/">CRUD Operations</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/getting-started/php/querying/">Querying</a>
  
  </li></ul>

  
  </li></ul>

  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/usage/">Usage</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/creating-objects/">Creating Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/reading-objects/">Reading Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/updating-objects/">Updating Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/deleting-objects/">Deleting Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/content-types/">Content Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/search/">Searching</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/mapreduce/">Using MapReduce</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/secondary-indexes/">Using Secondary Indexes</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/bucket-types/">Bucket Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/commit-hooks/">Using Commit Hooks</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/search-schemas/">Creating Search Schemas</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/searching-data-types/">Searching with Data Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/document-store/">Implementing a Document Store</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/custom-extractors/">Custom Extractors</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/usage/security/">Security</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/java/">Java</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/ruby/">Ruby</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/python/">Python</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/erlang/">Erlang</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/security/php/">PHP</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/replication/">Replication</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/">Conflict Resolution</a></span></h4>
    
<ul class="depth-3">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/java/">Java</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/ruby/">Ruby</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/python/">Python</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/csharp/">C Sharp</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/nodejs/">NodeJS</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/php/">PHP</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/usage/conflict-resolution/golang/">Go</a>
  
  </li></ul>

  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/data-types/">Data Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/data-modeling/">Data Modeling</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/app-guide/">Application Guide</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/replication-properties/">Replication Properties</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/strong-consistency/">Strong Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/write-once/">Write Once</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/app-guide/reference/">Reference</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/client-libraries/">Client Libraries</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/developing/api/">APIs</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/developing/api/repl-hooks/">V2 Multi-Datacenter REPL Hooks API</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/api/backend/">Backend API</a>
  
  </li></ul>

  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/developing/faq/">Developing FAQ</a>
  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-beaker"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/riak/kv/2.1.3/learn/">Learning</a></span>
        <div class="clear"></div>
      </h3>
      
      
        
<ul class="depth-1">
  
  <li >
  
    <a href="/riak/kv/2.1.3/learn/why-riak-kv/">Why Riak KV?</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/use-cases/">Use Cases</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/new-to-nosql/">New to NoSQL?</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/glossary/">Riak KV Glossary</a>
  
  </li>
  <li >
  
    <h4><span><a href="/riak/kv/2.1.3/learn/concepts/">Concepts</a></span></h4>
    
<ul class="depth-2">
  
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/active-anti-entropy/">Active Anti-Entropy</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/buckets/">Buckets</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/capability-negotiation/">Capability Negotiation</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/causal-context/">Causal Context</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/clusters/">Clusters</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/crdts/">Data Types</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/eventual-consistency/">Eventual Consistency</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/keys-and-objects/">Keys and Objects</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/replication/">Replication</a>
  
  </li>
  <li >
  
    <a href="/riak/kv/2.1.3/learn/concepts/vnodes/">Vnodes</a>
  
  </li></ul>

  
  </li></ul>

       
      <h3>
        <div class="icon-container"><span aria-hidden="true" class="nav-icon icon-comments"></span>&nbsp;</div>
        <span class="separator">&#124;</span>
        <span class="menu-title"><a href="/community">Community</a></span>
        <div class="clear"></div>
      </h3>
      <ul></ul> 
    </div>
  </nav>

  
  <ul id="fixed-nav">
    <li>
      <a href="https://github.com/basho/basho_docs" target="_blank">
        <div class="icon-container">
          <span aria-hidden="true" class="nav-icon" data-icon="&#xe004;"></span>
        </div>
        <span class="separator">&#124;</span>Available on GitHub
      </a>
    </li>
    <li>
      <a href="/riak/latest/community/">
        <div class="icon-container">
          <span aria-hidden="true" class="nav-icon" data-icon="&#xf059;"></span>
        </div>
        <span class="separator">&#124;</span>Get Help
      </a>
    </li>
  </ul>
</aside>


  <script>
  (function() {
    var cx = '011972015458788978446:zgdcy4fa-o0';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<div style="width:0px;overflow:hidden;height:0px;">
  <gcse:search></gcse:search>
</div>


  <div role="main">

    <header class="masthead">
  <div id="header">
    
    <div id="header-inner">
      <div class="icon-reorder" id="nav-toggle"></div>

      <div id="top-nav">
        
        <a href="/riak/kv/2.1.3/downloads/"><span class="icon-download-alt"></span>Downloads</a>
        <div id="nav-more"><span class="icon-more"></span></div>
      </div>

      <a class="responsive-toggle"></a>
      
      
      <a class="logo" href="/index.html"><h1>Riak Docs</h1></a>
      
      <span class="tagline">Product tutorials, how-tos, and fully-documented APIs.</span>
      <div id="nav-menu">
        <h2>Links</h2>
        <ul>
          <li><a href="http://docs.basho.com/">Docs Home</a></li>
          <li><a href="http://basho.com/">Basho Website</a></li>
        </ul>
        
        <div id="nav-menu-arrow"></div>
        <div id="nav-menu-arrow-back"></div>
      </div>

      <div class="clear"></div>

      <div class="header-rule"></div>
    </div>
  </div>
</header>


    <article class="mainarticle">

      <div class="versions">
  <div id="version-ddown-button" class="unselected">
    <div class="version-ddown-title">Version</div>
    <div class="version-ddown-number">2.1.3</div>
    <div class="version-ddown-arrow"></div>
  </div>
  <ol id="version-list" style="display: none;">
  
  
    
    
      
      
      <li class="sans versions-0 current">DEV</li>
      
      <li class="current versions-0"><a class="versioned" href="/riak/kv/2.1.3/using/admin/riak-admin/">2.1.3</a></li>
    
    
      
      
      
      <li class=" versions-0 first"><a class="versioned" href="/riak/kv/2.1.1/using/admin/riak-admin/">2.1.1</a></li>
    
  
    
    
      
      
      
      <li class="sans versions-1 current">LTS</li>
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.6/using/admin/riak-admin/">2.0.6</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.5/using/admin/riak-admin/">2.0.5</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.4/using/admin/riak-admin/">2.0.4</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.2/using/admin/riak-admin/">2.0.2</a></li>
    
      
      
      
      
      <li class=" versions-1"><a class="versioned" href="/riak/kv/2.0.1/using/admin/riak-admin/">2.0.1</a></li>
    
    
      
      
      
      <li class=" versions-1 first"><a class="versioned" href="/riak/kv/2.0.0/using/admin/riak-admin/">2.0.0</a></li>
    
  
  
  <li class="versions-5 first"><a class="sans versioned" href="http://docs.basho.com/riak/1.4.12/">older</a></li>
  </ol>
</div>


      
      

      <header><h1>riak-admin Command Line Interface</h1></header>

      

      
      <nav id="toc">
        <h2 class="title">Contents</h2>
        <div id="toc-wrapper">
          <ol id="toc-items"></ol>
        </div>
      </nav>
      

      

<h2 id="riak-admin:bb9ce005224e02e9f6d8533d95d9b2de">riak-admin</h2>

<p>This script performs operations unrelated to node liveness, including
node membership, backup, and basic status reporting. The node must be
running for most of these commands to work. Running the <code>riak-admin</code>
command by itself will output a list of available commands:</p>

<pre><code>Usage: riak-admin { cluster | join | leave | backup | restore | test |
                    reip | js-reload | erl-reload | wait-for-service |
                    ringready | transfers | force-remove | down |
                    cluster-info | member-status | ring-status | vnode-status |
                    aae-status | diag | stat | status | transfer-limit | reformat-indexes |
                    top [-interval N] [-sort reductions|memory|msg_q] [-lines N] |
                    downgrade-objects | security | bucket-type | repair-2i |
                    search | services | ensemble-status | handoff | set |
                    show | describe }
</code></pre>

<h2 id="node-naming:bb9ce005224e02e9f6d8533d95d9b2de">Node Naming</h2>

<p>An important thing to bear in mind is that all Riak nodes have unique
names within the cluster that are used for a wide variety of operations.
The name for each node can be set and changed in each node&rsquo;s
<a href="/riak/kv/2.1.3/configuring/reference">configuration files</a>. The examples below set the name of a node to
<code>riak_node_1@199.99.99.01</code> in the <code>riak.conf</code> file if you are using the
newer configuration system and in <code>vm.args</code> if you are using the older
system:</p>

<pre><code class="language-riakconf">nodename = riak_node_1@199.99.99.01
</code></pre>

<pre><code class="language-vmargs">-name riak_node_1@199.99.99.01
</code></pre>

<p>The name prior to the <code>@</code> symbol can be whatever you&rsquo;d like, e.g.
<code>riak1</code>, <code>dev</code>, <code>cluster1_node1</code>, or <code>spaghetti</code>. After the <code>@</code> you must
use a resolvable IP address or hostname. In general, we recommend using
hostnames over IP addresses when possible because this enables the node
to potentially live on different machines over the course of its
existence.</p>

<h2 id="cluster:bb9ce005224e02e9f6d8533d95d9b2de">cluster</h2>

<p>Documentation for the <code>riak-admin cluster</code> command interface can be
found in [[Cluster Administration]].</p>

<h2 id="join:bb9ce005224e02e9f6d8533d95d9b2de">join</h2>

<div class="note"><div class="title">Deprecation Notice</div>
As of Riak version 1.2, the <code>riak-admin join</code> command has
been deprecated in favor of the <code>[[riak-admin cluster join|Cluster
Administration#join]]</code> command. However, this command can still be
used by providing a <code>-f</code> option (which forces the command).
</div>

<p>Joins the running node to another running node so that they participate
in the same cluster. <code>&lt;node&gt;</code> is the other node to connect to.</p>

<pre><code class="language-bash">riak-admin join -f &lt;node&gt;
</code></pre>

<h2 id="leave:bb9ce005224e02e9f6d8533d95d9b2de">leave</h2>

<div class="note"><div class="title">Deprecation Notice</div>
As of Riak version 1.2, the <code>riak-admin leave</code> command has
been deprecated in favor of the new <code>[[riak-admin cluster
leave|Cluster Administration#leave]]</code> command. However, this
command can still be used by providing a <code>-f</code> option (which
forces the command).
</div>

<p>Causes the node to leave the cluster in which it participates. After
this is run, the node in question will hand-off all its replicas to
other nodes in the cluster before it completely exits.</p>

<pre><code class="language-bash">riak-admin leave -f
</code></pre>

<h2 id="backup:bb9ce005224e02e9f6d8533d95d9b2de">backup</h2>

<div class="note">
<div class="title">Deprecation notice</div>
The `riak-admin backup` command has been deprecated. We recommend using
backend-specific backup procedures instead. Documentation can be found
in [[Backing up Riak]].
</div>

<p>Backs up the data from the node or entire cluster into a file.</p>

<pre><code class="language-bash">riak-admin backup &lt;node&gt; &lt;cookie&gt; &lt;filename&gt; [node|all]
</code></pre>

<ul>
<li><code>&lt;node&gt;</code> is the node from which to perform the backup.</li>
<li><code>&lt;cookie&gt;</code> is the Erlang cookie/shared secret used to connect to the
node. This is <code>riak</code> in the [[default configuration|Configuration
Files#Node-Metadata]].</li>
<li><code>&lt;filename&gt;</code> is the file where the backup will be stored. <em>This should
be the full path to the file</em>.</li>
<li><code>[node|all]</code> specifies whether the data on this node or the entire</li>
</ul>

<h2 id="restore:bb9ce005224e02e9f6d8533d95d9b2de">restore</h2>

<div class="note">
<div class="title">Deprecation notice</div>
The `riak-admin restore` command has been deprecated. It was originally
intended to be used in conjunction with backups performed using the
`riak-admin backup` command, which is also deprecated. We recommend
using the backup and restore methods described in [[Backing up Riak]].
</div>

<p>Restores data to the node or cluster from a previous backup.</p>

<pre><code class="language-bash">riak-admin restore &lt;node&gt; &lt;cookie&gt; &lt;filename&gt;
</code></pre>

<ul>
<li><code>&lt;node&gt;</code> is the node which will perform the restore.</li>
<li><code>&lt;cookie&gt;</code> is the Erlang cookie/shared secret used to connect to the
node. This is <code>riak</code> in the [[default configuration|Configuration
Files#Node-Metadata]].</li>
<li><code>&lt;filename&gt;</code> is the file where the backup is stored. <em>This should be
the full path to the file</em>.</li>
</ul>

<h2 id="test:bb9ce005224e02e9f6d8533d95d9b2de">test</h2>

<p>Runs a test of a few standard Riak operations against the running node.</p>

<pre><code class="language-bash">riak-admin test
</code></pre>

<p>If the test is successful, you should see output like the following:</p>

<pre><code>Successfully completed 1 read/write cycle to 'dev1@127.0.0.1'
</code></pre>

<h2 id="reip:bb9ce005224e02e9f6d8533d95d9b2de">reip</h2>

<p>Renames a node. This process backs up and edits the Riak ring, and
<strong>must</strong> be run while the node is stopped. Reip should only be run in
cases where <code>riak-admin cluster force-replace</code> cannot be used to
rename the nodes of a cluster. For more information, visit the
[[Renaming Nodes]] document.</p>

<pre><code class="language-bash">riak-admin reip &lt;old nodename&gt; &lt;new nodename&gt;
</code></pre>

<div class="note">
<div class="title">Note about reip prior to Riak 2.0</title></div>
Several bugs have been fixed related to reip in Riak 2.0. We recommend
against using reip prior to 2.0, if possible.
</div>

<h2 id="js-reload:bb9ce005224e02e9f6d8533d95d9b2de">js-reload</h2>

<p>Forces the embedded Javascript virtual machines to be restarted. This is
useful when deploying custom built-in [[MapReduce|Using MapReduce]]
functions.</p>

<p><strong>Note</strong>: This needs to be run on <em>all nodes</em> in the cluster.</p>

<pre><code class="language-bash">riak-admin js-reload
</code></pre>

<h2 id="erl-reload:bb9ce005224e02e9f6d8533d95d9b2de">erl-reload</h2>

<p>Reloads the Erlang <code>.beam</code> files used for [[MapReduce|Using MapReduce]]
jobs, [[pre- and post-commit hooks|Advanced Commit Hooks]], and other
purposes. More information on custom Erlang code can be found in the
[[Installing Custom Code]] guide.</p>

<p><strong>Note</strong>: This needs to be run on <em>all nodes</em> in the cluster.</p>

<pre><code class="language-bash">riak-admin erl-reload
</code></pre>

<h2 id="wait-for-service:bb9ce005224e02e9f6d8533d95d9b2de">wait-for-service</h2>

<p>Waits on a specific watchable service to be available (typically
<code>riak_kv</code>). This is useful when (re-)starting a node while the cluster
is under load. Use <code>riak-admin services</code> to see which services are
available on a running node.</p>

<pre><code class="language-bash">riak-admin wait-for-service &lt;service&gt; &lt;nodename&gt;
</code></pre>

<h2 id="ringready:bb9ce005224e02e9f6d8533d95d9b2de">ringready</h2>

<p>Checks whether all nodes in the cluster agree on the ring state.
Prints <code>FALSE</code> if the nodes do not agree. This is useful after changing
cluster membership to make sure that the ring state has settled.</p>

<pre><code class="language-bash">riak-admin ringready
</code></pre>

<h2 id="transfers:bb9ce005224e02e9f6d8533d95d9b2de">transfers</h2>

<p>Identifies nodes that are awaiting transfer of one or more partitions.
This usually occurs when partition ownership has changed (after adding
or removing a node) or after node recovery.</p>

<pre><code class="language-bash">riak-admin transfers
</code></pre>

<h2 id="transfer-limit:bb9ce005224e02e9f6d8533d95d9b2de">transfer-limit</h2>

<p>Change the <code>handoff_concurrency</code> limit. The value set by running this
command will only persist while the node is running. If the node is
restarted, the <code>transfer-limit</code> will return to the default of <code>2</code> or the
value specified in the <code>[[transfer_limit|Configuration Files#Ring]]</code>
setting in the <code>riak.conf</code> configuration file.</p>

<p>Running this command with no arguments will display the current
transfer-limit for each node in the cluster.</p>

<pre><code class="language-bash">riak-admin transfer-limit &lt;node&gt; &lt;limit&gt;
</code></pre>

<h2 id="down:bb9ce005224e02e9f6d8533d95d9b2de">down</h2>

<p>Marks a node as down so that ring transitions can be performed before
the node is brought back online.</p>

<pre><code class="language-bash">riak-admin down &lt;node&gt;
</code></pre>

<h2 id="cluster-info:bb9ce005224e02e9f6d8533d95d9b2de">cluster-info</h2>

<p>Output system information from a Riak cluster. This command will collect
information from all nodes or a subset of nodes and output the data to a
single text file.</p>

<pre><code class="language-bash">riak-admin cluster-info &lt;output file&gt; [&lt;node list&gt;]
</code></pre>

<p>The following information is collected:</p>

<ul>
<li>Current time and date</li>
<li>VM statistics</li>
<li><code>erlang:memory()</code> summary</li>
<li>Top 50 process memory hogs</li>
<li>Registered process names</li>
<li>Registered process name via <code>regs()</code></li>
<li>Non-zero mailbox sizes</li>
<li>Ports</li>
<li>Applications</li>
<li>Timer status</li>
<li>ETS summary</li>
<li>Nodes summary</li>
<li><code>net_kernel</code> summary</li>
<li><code>inet_db</code> summary</li>
<li>Alarm summary</li>
<li>Global summary</li>
<li><code>erlang:system_info()</code> summary</li>
<li>Loaded modules</li>
<li>Riak Core config files</li>
<li>Riak Core vnode modules</li>
<li>Riak Core ring</li>
<li>Riak Core latest ring file</li>
<li>Riak Core active partitions</li>
<li>Riak KV status</li>
<li>Riak KV ringready</li>
<li>Riak KV transfers</li>
</ul>

<h4 id="examples:bb9ce005224e02e9f6d8533d95d9b2de">Examples</h4>

<p>Output information from all nodes to <code>/tmp/cluster_info.txt</code>:</p>

<pre><code class="language-bash">riak-admin cluster_info /tmp/cluster_info.txt
</code></pre>

<p>Output information from the current nodeL</p>

<pre><code class="language-bash">riak-admin cluster_info /tmp/cluster_info.txt local
</code></pre>

<p>Output information from a subset of nodes:</p>

<pre><code class="language-bash">riak-admin cluster_info /tmp/cluster_info.txt riak@192.168.1.10
riak@192.168.1.11
</code></pre>

<h2 id="member-status:bb9ce005224e02e9f6d8533d95d9b2de">member-status</h2>

<p>Prints the current status of all cluster members.</p>

<pre><code class="language-bash">riak-admin member-status
</code></pre>

<h2 id="ring-status:bb9ce005224e02e9f6d8533d95d9b2de">ring-status</h2>

<p>Outputs the current claimant, its status, ringready, pending ownership
handoffs, and a list of unreachable nodes.</p>

<pre><code class="language-bash">riak-admin ring-status
</code></pre>

<h2 id="vnode-status:bb9ce005224e02e9f6d8533d95d9b2de">vnode-status</h2>

<p>Outputs the status of all vnodes the are running on the local node.</p>

<pre><code class="language-bash">riak-admin vnode-status
</code></pre>

<h2 id="aae-status:bb9ce005224e02e9f6d8533d95d9b2de">aae-status</h2>

<p>This command provides insight into operation of Riak&rsquo;s Active
Anti-Entropy (AAE) feature.</p>

<pre><code class="language-bash">riak-admin aae-status
</code></pre>

<p>The output contains information on AAE key/value partition exchanges,
entropy tree building, and key repairs which were triggered by AAE.</p>

<ul>
<li><p><strong>Exchanges</strong></p>

<ul>
<li>The <em>Last</em> column lists when the most recent exchange between a
partition and one of its sibling replicas was performed.</li>
<li>The <em>All</em> column shows how long it has been since a partition
exchanged with all of its sibling replicas.</li>
</ul></li>

<li><p><strong>Entropy Trees</strong></p>

<ul>
<li>The <em>Built</em> column shows when the hash trees for a given partition
were created.</li>
</ul></li>

<li><p><strong>Keys Repaired</strong></p>

<ul>
<li>The <em>Last</em> column shows the number of keys repaired during the most
recent key exchange.</li>
<li>The <em>Mean</em> column shows the mean number of keys repaired during all
key exchanges since the last node restart.</li>
<li>The <em>Max</em> column shows the maximum number of keys repaired during all
key exchanges since the last node restart.</li>
</ul></li>
</ul>

<div class="note">
<div class="title">Note in AAE status information</div>
All AAE status information is in-memory and is reset across a node
restart. Only tree build times are persistent (since trees themselves
are persistent)
</div>

<p>More details on the <code>aae-status</code> command are available in the <a href="https://github.com/basho/riak/blob/1.3/RELEASE-NOTES.md#active-anti-entropy">Riak
version 1.3 release notes</a>.</p>

<h2 id="diag:bb9ce005224e02e9f6d8533d95d9b2de">diag</h2>

<p>The <code>diag</code> command invokes the <a href="http://riaknostic.basho.com/">Riaknostic</a>
diagnostic system.</p>

<pre><code class="language-bash">riak-admin diag
</code></pre>

<p>This command allows you to specify which diagnostic checks you would
like to run, which types of diagnostic messages you wish to see, and so
on. More comprehensive information can be found in the documentation on
[[inspecting a node]].</p>

<h2 id="stat:bb9ce005224e02e9f6d8533d95d9b2de">stat</h2>

<p>Provides an interface for interacting with a variety of cluster-level
metrics and information.</p>

<pre><code class="language-bash">riak-admin stat
</code></pre>

<p>Full documentation of this command can be found in [[Statistics and
Monitoring]].</p>

<h2 id="status:bb9ce005224e02e9f6d8533d95d9b2de">status</h2>

<p>Prints status information, including performance statistics, system
health information, and version numbers. Further information about the
output is available in the documentation on [[inspecting a node]].</p>

<pre><code class="language-bash">riak-admin status
</code></pre>

<h2 id="reformat-indexes:bb9ce005224e02e9f6d8533d95d9b2de">reformat-indexes</h2>

<p>This command reformats integer indexes in Secondary Index data for
versions of Riak prior to 1.3.1 so that range queries over the indexes
will return correct results.</p>

<pre><code>riak-admin reformat-indexes [&lt;concurrency&gt;] [&lt;batch size&gt;] --downgrade
</code></pre>

<p>The <code>concurrency</code> option defaults to <code>2</code> and controls how many
partitions are concurrently reformatted.</p>

<p>The <code>batch size</code> option controls the number of simultaneous key
operations and defaults to <code>100</code>.</p>

<p>This command can be executed while the node is serving requests, and
default values are recommended for most cases. You should only change
the default values after testing impact on cluster performance.</p>

<p>Information is written to <code>console.log</code> upon completion of the process.</p>

<p>A <code>--downgrade</code> switch can be specified when downgrading a node to a version
of Riak prior to version 1.3.1.</p>

<p>Additional details are available in the <a href="https://github.com/basho/riak/blob/1.3/RELEASE-NOTES.md">Riak 1.3.1 release
notes</a>.</p>

<h2 id="top:bb9ce005224e02e9f6d8533d95d9b2de">top</h2>

<p>Top uses Erlang&rsquo;s etop to provide information about what the Erlang
processes inside of Riak are doing. Top reports process reductions (an
indicator of CPU utilization), memory used, and message queue sizes.</p>

<pre><code class="language-bash">riak-admin top [-interval N] [-sort reductions|memory|msg_q] [-lines N]
</code></pre>

<p>Options:</p>

<ul>
<li><code>interval</code> specifies the number of seconds between each update of the
top output and defaults to <code>5</code></li>
<li><code>sort</code> determines on which category <code>riak-admin top</code> sorts and
defaults to <code>reductions</code></li>
<li><code>lines</code> specifies the number of processes to display in the top output
and defaults to <code>10</code></li>
</ul>

<p>More information about Erlang&rsquo;s etop can be found in the <a href="http://www.erlang.org/doc/man/etop.html">etop
documentation</a>.</p>

<h2 id="downgrade-objects:bb9ce005224e02e9f6d8533d95d9b2de">downgrade-objects</h2>

<p>This command is used when changing the format of Riak objects, usually
as part of a version downgrade.</p>

<pre><code class="language-bash">riak-admin downgrade-objects &lt;kill-handoffs&gt; [&lt;concurrency&gt;]
</code></pre>

<p>More detailed information can be found in [[Rolling Downgrades]].</p>

<h2 id="security:bb9ce005224e02e9f6d8533d95d9b2de">security</h2>

<p>This command enables you to manage to manage Riak users, choose sources
of authentication, assign and revoke permissions to/from users and
groups, enable and disable Riak Security, and more.</p>

<pre><code class="language-bash">riak-admin security &lt;command&gt;
</code></pre>

<p>More comprehensive information on user management and can be found in
the [[Authentication and Authorization]] guide. Detailed information on
authentication sources can be found in [[Managing Security Sources]].</p>

<h2 id="bucket-type:bb9ce005224e02e9f6d8533d95d9b2de">bucket-type</h2>

<p>Bucket types are a means of managing bucket properties introduced in
Riak 2.0, as well as an additional namespace in Riak in addition to
buckets and keys. This command enables you to create and modify bucket
types, provide the status of currently available bucket types, and
activate created bucket types.</p>

<pre><code class="language-bash">riak-admin bucket-type &lt;command&gt;
</code></pre>

<p>More on bucket types can be found in [[Using Bucket Types|Using Bucket
Types#Setting-Up-Buckets-to-Use-Riak-Data-Types]].</p>

<h2 id="repair-2i:bb9ce005224e02e9f6d8533d95d9b2de">repair-2i</h2>

<p>This command repairs [[secondary indexes|Using Secondary Indexes]] in a
specific partition or on a cluster-wide basis. Implementation details
can be found in [[Repairing Indexes]].</p>

<p>To repair secondary indexes throughout the entire cluster, run the
<code>repair-2i</code>command by itself, without a subcommand:</p>

<pre><code class="language-bash">riak-admin repair-2i
</code></pre>

<p>This will initiate the repair process. When you run this command, you
should see something like the following (where <code>&lt;ring_size&gt;</code> is the
number of partitions in your Riak cluster):</p>

<pre><code>Will repair 2i data on &lt;ring_size&gt; partitions
Watch the logs for 2i repair progress reports
</code></pre>

<p>To repair secondary indexes in a specific partition, provide the ID of
the partition along with the <code>repair-2i</code> command:</p>

<pre><code class="language-bash">riak-admin repair-2i 593735040165679310520246963290989976735222595584
</code></pre>

<p>You can check on the status of the repair process at any time:</p>

<pre><code class="language-bash">riak-admin repair-2i status
</code></pre>

<p>If the repair is already finished, the console will return <code>2i repair is
not running</code>. If the repair is still in progress, the console will
return a series of statistics like this:</p>

<pre><code>2i repair status is running:
        Total partitions: 64
        Finished partitions: 44
        Speed: 100
        Total 2i items scanned: 0
        Total tree objects: 0
        Total objects fixed: 0
</code></pre>

<p>If you&rsquo;re concerned about the computational resources required to repair
secondary indexes, you can set the speed of the process to an integer
between 1 and 100 (with 100 being the fastest). This command would set
the speed to 90:</p>

<pre><code class="language-bash">riak-admin repair-2i --speed 90
</code></pre>

<p>The repair process can be stopped at any moment using the <code>kill</code>
command:</p>

<pre><code class="language-bash">riak-admin repair-2i kill
</code></pre>

<h2 id="search:bb9ce005224e02e9f6d8533d95d9b2de">search</h2>

<p>The search command provides sub-commands for various administrative
work related to the new Riak Search.</p>

<pre><code class="language-bash">riak-admin search &lt;command&gt;
</code></pre>

<h3 id="aae-status-1:bb9ce005224e02e9f6d8533d95d9b2de">aae-status</h3>

<pre><code class="language-bash">riak-admin search aae-status
</code></pre>

<p>Output active anti-entropy (AAE) statistics for search. There are
three sections. Each section contains statistics for a specific aspect
of AAE for every partition owned by the local node.</p>

<p>The first section provides information on exchanges. Exchange is the
process of comparing hash trees to determine divergences between KV
data and search indexes. The <code>Index</code> column contains the partition
number. The <code>Last (ago)</code> column is the amount of time that has passed
since the last exchange. The <code>All (ago)</code> column is the amount of time
that has passed since all preflists for that partition have been
exchanged.</p>

<p>The second section lists how much time has passed since the hashtree
for that partition has been built from scratch. By default trees
expire after 1 week and are rebuilt from scratch.</p>

<p>The third section presents statistics on repair operations that have
occurred. Repair is performed when AAE notices that the KV and search
hashtree don&rsquo;t match for a particular key. The <code>Last</code> column is the
number of keys repaired during the last exchange. The <code>Mean</code> column is
the average number of keys repaired for all exchange rounds since the
node has started. The <code>Max</code> column is the maximum number of keys
repaired for a given exchange round since the node has started.</p>

<h3 id="switch-to-new-search:bb9ce005224e02e9f6d8533d95d9b2de">switch-to-new-search</h3>

<div class="info">
<div class="title">Only For Legacy Migration</div>
This is only needed when migrating from legacy riak search to the new
Search (Yokozuna).
</div>

<pre><code class="language-bash">riak-admin search switch-to-new-search
</code></pre>

<p>Switch handling of the HTTP <code>/solr/&lt;index&gt;/select</code> resource and
protocol buffer query messages from legacy Riak Search to new Search
(Yokozuna).</p>

<h2 id="services:bb9ce005224e02e9f6d8533d95d9b2de">services</h2>

<p>Lists available services on the node (e.g. <code>riak_kv</code>).</p>

<pre><code class="language-bash">riak-admin services
</code></pre>

<h2 id="ensemble-status:bb9ce005224e02e9f6d8533d95d9b2de">ensemble-status</h2>

<p>This command is used to provide insight into the current status of the
consensus subsystem undergirding Riak&rsquo;s [[strong consistency]] feature.</p>

<pre><code class="language-bash">riak-admin ensemble-status
</code></pre>

<p>This command can also be used to check on the status of a specific
consensus group in your cluster:</p>

<pre><code class="language-bash">riak-admin ensemble-status &lt;group id&gt;
</code></pre>

<p>Complete documentation of this command can be found in [[Managing Strong
Consistency|Managing Strong Consistency#ensemble-status]].</p>

<h2 id="handoff:bb9ce005224e02e9f6d8533d95d9b2de">handoff</h2>

<p>Documentation for the <code>handoff</code> command can be found in [[Handoff]].</p>

<h2 id="set:bb9ce005224e02e9f6d8533d95d9b2de">set</h2>

<p>Enables you to change the value of one of Riak&rsquo;s configuration
parameters on the fly, without needing to stop and restart the node.</p>

<pre><code class="language-bash">riak-admin set &lt;variable&gt;=&lt;value&gt;
</code></pre>

<p>At the moment, the <code>set</code> command can only be used for the following
parameters, all three of which are related to Riak&rsquo;s [[handoff]]
subsystem:</p>

<ul>
<li><code>transfer_limit</code></li>
<li><code>handoff.outbound</code></li>
<li><code>handoff.inbound</code></li>
</ul>

<h2 id="show:bb9ce005224e02e9f6d8533d95d9b2de">show</h2>

<p>Whereas the <code>[[riak-admin status|riak-admin Command Line#stats]]</code>
command will display all currently available statistics for your Riak
cluster, the <code>show</code> command enables you to view only some of those
statistics.</p>

<pre><code class="language-bash">riak-admin show &lt;variable&gt;
</code></pre>

<h2 id="describe:bb9ce005224e02e9f6d8533d95d9b2de">describe</h2>

<p>Provides a brief description of one of Riak&rsquo;s [[configurable
parameters|Configuration Files]].</p>

<pre><code class="language-bash">riak-admin describe &lt;variable&gt;
</code></pre>

<p>If you want to know the meaning of the <code>nodename</code> parameter:</p>

<pre><code class="language-bash">riak-admin describe nodename
</code></pre>

<p>That will produce the following output:</p>

<pre><code>Number of partitions in the cluster (only valid when first
creating the cluster). Must be a power of 2, minimum 8 and maximum
1024.
</code></pre>


      <div class="clear"></div>

    </article>

    <footer class="mastfooter">
    This work is licensed under a
    <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
        Creative Commons Attribution 4.0 International Public License
    </a><br>
    &copy; 2011-2016&nbsp;<a href="http://www.basho.com">Basho Technologies, Inc.</a>
</footer>


  </div>

  <script src="/js/all.js" type="text/javascript"></script>
<script type= "text/javascript">
  
  hljs.configure({languages: []});
  hljs.initHighlighting();

  
  
  
  $(function() {
    $(".js_enabled pre").css("visibility", "visible");
  });
</script>


</body>
</html>
