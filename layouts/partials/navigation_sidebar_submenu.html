<!-- Navigation Sidebar Sub Menus
     ----------------------------
  This partial should be invoked with a dict containing the below members,
    "current_menu" -- The menu item to render, typically the current contenxt of
                      a `range` over Children
    "current_node" -- The current node (typically a page) that started the
                      sub-menu recursion
    "menu_title"   -- The name of the root Hugo menu that's being rendered
    "menu_depth"   -- The current recursion depth (should be incremented by one
                      whenever this partial is called into).
  $current_node and $menu_title will be set in navigation_sidebar.html and
  will should passed on without any modification.
{{ $current_node := .current_node }}
{{ $menu_title   := .menu_title }}
{{ $menu_depth   := .menu_depth }}
-->
<ul class="depth-{{$menu_depth}}"{{ if or ($current_node.IsMenuCurrent $menu_title .current_menu) ($current_node.HasMenuCurrent $menu_title .current_menu) }} style="display: block;"{{end}}>
  {{ range $next_menu := .current_menu.Children }}
  <li{{ if $current_node.IsMenuCurrent $menu_title . }} class="current"{{end}}>
  {{ if $next_menu.HasChildren }}
    <h4>
      <span><a href="{{$next_menu.URL}}">{{$next_menu.Name}}</a></span>
      <span class="menu-toggle{{ if or ($current_node.IsMenuCurrent $menu_title $next_menu) ($current_node.HasMenuCurrent $menu_title $next_menu) }} open{{end}}"></span>
    </h4>
    {{ partial "navigation_sidebar_submenu.html" (dict "current_menu" $next_menu "current_node" $current_node "menu_title" $menu_title "menu_depth" (add 1 $menu_depth)) }}
  {{ else }}
    <h4><span><a href="{{$next_menu.URL}}">{{$next_menu.Name}}</a></span></h4>
  {{ end }}
  </li>{{ end }}</ul>
